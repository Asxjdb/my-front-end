
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="MyFontEnd">
      
      
        <link rel="canonical" href="https://asxjdb.github.io/my-front-end/%E5%B0%8F%E6%BB%A1VUE/">
      
      
        <link rel="prev" href="../Vue/">
      
      
        <link rel="next" href="../%E6%9D%82%E9%A1%B9/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.25">
    
    
      
        <title>小满VUE - 我的前端笔记</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto Slab";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="deep-purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#vue3" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href=".." title="我的前端笔记" class="md-header__button md-logo" aria-label="我的前端笔记" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            我的前端笔记
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              小满VUE
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="deep-purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="cyan" data-md-color-accent="deep-purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/asxjdb/my-front-end/" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Asxjdb/my-front-end
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="我的前端笔记" class="md-nav__button md-logo" aria-label="我的前端笔记" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    我的前端笔记
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/asxjdb/my-front-end/" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Asxjdb/my-front-end
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../HTML/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTML
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../CSS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CSS
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../JavaScript/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JavaScript
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Node/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Node
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Vue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vue
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    小满VUE
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    小满VUE
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#vue3" class="md-nav__link">
    <span class="md-ellipsis">
      Vue3
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Vue3">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      数组更新检测
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      表单处理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="表单处理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#v-module" class="md-nav__link">
    <span class="md-ellipsis">
      v-module
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      常用表单元素
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      单选按钮
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      复选框
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      修饰符
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      响应式修改
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ref" class="md-nav__link">
    <span class="md-ellipsis">
      Ref全家桶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ref全家桶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ref_1" class="md-nav__link">
    <span class="md-ellipsis">
      ref
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#isref" class="md-nav__link">
    <span class="md-ellipsis">
      isRef
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shallowref" class="md-nav__link">
    <span class="md-ellipsis">
      shallowRef
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#triggerref" class="md-nav__link">
    <span class="md-ellipsis">
      triggerRef
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customref" class="md-nav__link">
    <span class="md-ellipsis">
      customRef
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      模版引用
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reactive" class="md-nav__link">
    <span class="md-ellipsis">
      reactive全家桶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="reactive全家桶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reactive_1" class="md-nav__link">
    <span class="md-ellipsis">
      reactive
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#readonly" class="md-nav__link">
    <span class="md-ellipsis">
      readonly
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shallowreactive" class="md-nav__link">
    <span class="md-ellipsis">
      shallowReactive
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to" class="md-nav__link">
    <span class="md-ellipsis">
      to系列全家桶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="to系列全家桶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#toref" class="md-nav__link">
    <span class="md-ellipsis">
      toRef
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#torefs" class="md-nav__link">
    <span class="md-ellipsis">
      toRefs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toraw" class="md-nav__link">
    <span class="md-ellipsis">
      toRaw
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      计算属性
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      侦听属性
    </span>
  </a>
  
    <nav class="md-nav" aria-label="侦听属性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#watch" class="md-nav__link">
    <span class="md-ellipsis">
      watch
    </span>
  </a>
  
    <nav class="md-nav" aria-label="watch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      监听一个
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      监听多个：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reactive_2" class="md-nav__link">
    <span class="md-ellipsis">
      监听Reactive
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reactive_3" class="md-nav__link">
    <span class="md-ellipsis">
      只监听reactive的一个值
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#watcheffect" class="md-nav__link">
    <span class="md-ellipsis">
      watchEffect
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      组件&amp;生命周期
    </span>
  </a>
  
    <nav class="md-nav" aria-label="组件&生命周期">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#less-sass-scoped" class="md-nav__link">
    <span class="md-ellipsis">
      实操组件和认识less sass 和 scoped
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      父子组件传参
    </span>
  </a>
  
    <nav class="md-nav" aria-label="父子组件传参">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      父传子
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      子传父
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      子组件变量暴露给父组件
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      全局组件，局部组件，递归组件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="全局组件，局部组件，递归组件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      注册全局组件：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      递归组件
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      动态组件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slot" class="md-nav__link">
    <span class="md-ellipsis">
      插槽slot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="插槽slot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      匿名插槽
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      具名插槽
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      作用域插槽
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      动态插槽
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      内置组件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="内置组件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#teleport" class="md-nav__link">
    <span class="md-ellipsis">
      Teleport传送组件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keep-alive" class="md-nav__link">
    <span class="md-ellipsis">
      keep-alive缓存组件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transition" class="md-nav__link">
    <span class="md-ellipsis">
      transition 过渡组件
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#provide-inject" class="md-nav__link">
    <span class="md-ellipsis">
      依赖注入Provide / Inject
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bus" class="md-nav__link">
    <span class="md-ellipsis">
      兄弟组件传参和bus
    </span>
  </a>
  
    <nav class="md-nav" aria-label="兄弟组件传参和bus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      借助父组件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-bus" class="md-nav__link">
    <span class="md-ellipsis">
      Event Bus
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mitt" class="md-nav__link">
    <span class="md-ellipsis">
      mitt库
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tsx" class="md-nav__link">
    <span class="md-ellipsis">
      TSX
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#directive" class="md-nav__link">
    <span class="md-ellipsis">
      directive自定义指令
    </span>
  </a>
  
    <nav class="md-nav" aria-label="directive自定义指令">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#js" class="md-nav__link">
    <span class="md-ellipsis">
      js图片懒加载
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      样例简介
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      函数简写
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      图片懒加载
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attrs-hooks" class="md-nav__link">
    <span class="md-ellipsis">
      自定义attrs / hooks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="自定义attrs / hooks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#attrs" class="md-nav__link">
    <span class="md-ellipsis">
      自定义attrs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hooks" class="md-nav__link">
    <span class="md-ellipsis">
      自定义hooks
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      全局函数和变量
    </span>
  </a>
  
    <nav class="md-nav" aria-label="全局函数和变量">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      消除报错版
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      新的组件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="新的组件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1fragment" class="md-nav__link">
    <span class="md-ellipsis">
      1.Fragment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2teleport" class="md-nav__link">
    <span class="md-ellipsis">
      2.Teleport
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3suspense" class="md-nav__link">
    <span class="md-ellipsis">
      3.Suspense
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vue3_1" class="md-nav__link">
    <span class="md-ellipsis">
      其他vue3新特性
    </span>
  </a>
  
    <nav class="md-nav" aria-label="其他vue3新特性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1api" class="md-nav__link">
    <span class="md-ellipsis">
      1.全局API的转移
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      2.其他改变
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#css" class="md-nav__link">
    <span class="md-ellipsis">
      CSS特性
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CSS特性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      插槽选择器：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      全局选择器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#css-module" class="md-nav__link">
    <span class="md-ellipsis">
      css module
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-loop" class="md-nav__link">
    <span class="md-ellipsis">
      event loop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pinia" class="md-nav__link">
    <span class="md-ellipsis">
      pinia
    </span>
  </a>
  
    <nav class="md-nav" aria-label="pinia">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup-store" class="md-nav__link">
    <span class="md-ellipsis">
      Setup Store
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-store" class="md-nav__link">
    <span class="md-ellipsis">
      Option Store
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%9D%82%E9%A1%B9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    杂项
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    蓝桥杯
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            蓝桥杯
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%93%9D%E6%A1%A5%E6%9D%AF/Index/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Index
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%93%9D%E6%A1%A5%E6%9D%AF/22%E7%9C%81%E8%B5%9B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    22省赛
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%93%9D%E6%A1%A5%E6%9D%AF/23%E7%9C%81%E8%B5%9B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    23省赛
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%93%9D%E6%A1%A5%E6%9D%AF/24%E7%9C%81%E8%B5%9B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    24省赛
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%93%9D%E6%A1%A5%E6%9D%AF/22%E5%9B%BD%E8%B5%9B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    22国赛
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%93%9D%E6%A1%A5%E6%9D%AF/23%E5%9B%BD%E8%B5%9B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    23国赛
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%93%9D%E6%A1%A5%E6%9D%AF/22%E6%A8%A1%E6%8B%9F%E8%B5%9B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    22模拟赛1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%93%9D%E6%A1%A5%E6%9D%AF/23%E6%A8%A1%E6%8B%9F%E8%B5%9B1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    23模拟赛1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%93%9D%E6%A1%A5%E6%9D%AF/23%E6%A8%A1%E6%8B%9F%E8%B5%9B2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    23模拟赛2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%93%9D%E6%A1%A5%E6%9D%AF/23%E6%A8%A1%E6%8B%9F%E8%B5%9B3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    23模拟赛3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%93%9D%E6%A1%A5%E6%9D%AF/24%E6%A8%A1%E6%8B%9F%E8%B5%9B1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    24模拟赛1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%93%9D%E6%A1%A5%E6%9D%AF/24%E6%A8%A1%E6%8B%9F%E8%B5%9B2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    24模拟赛2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%93%9D%E6%A1%A5%E6%9D%AF/24%E6%A8%A1%E6%8B%9F%E8%B5%9B3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    24模拟赛3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%93%9D%E6%A1%A5%E6%9D%AF/%E7%AC%AC44%E6%9C%9F%E7%BA%BF%E4%B8%8A%E7%BC%96%E7%A8%8B%E5%AE%9E%E6%88%98%E8%B5%9B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第44期线上编程实战赛
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%93%9D%E6%A1%A5%E6%9D%AF/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    前端面试题库
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#vue3" class="md-nav__link">
    <span class="md-ellipsis">
      Vue3
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Vue3">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      数组更新检测
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      表单处理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="表单处理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#v-module" class="md-nav__link">
    <span class="md-ellipsis">
      v-module
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      常用表单元素
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      单选按钮
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      复选框
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      修饰符
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      响应式修改
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ref" class="md-nav__link">
    <span class="md-ellipsis">
      Ref全家桶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ref全家桶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ref_1" class="md-nav__link">
    <span class="md-ellipsis">
      ref
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#isref" class="md-nav__link">
    <span class="md-ellipsis">
      isRef
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shallowref" class="md-nav__link">
    <span class="md-ellipsis">
      shallowRef
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#triggerref" class="md-nav__link">
    <span class="md-ellipsis">
      triggerRef
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customref" class="md-nav__link">
    <span class="md-ellipsis">
      customRef
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      模版引用
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reactive" class="md-nav__link">
    <span class="md-ellipsis">
      reactive全家桶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="reactive全家桶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reactive_1" class="md-nav__link">
    <span class="md-ellipsis">
      reactive
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#readonly" class="md-nav__link">
    <span class="md-ellipsis">
      readonly
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shallowreactive" class="md-nav__link">
    <span class="md-ellipsis">
      shallowReactive
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to" class="md-nav__link">
    <span class="md-ellipsis">
      to系列全家桶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="to系列全家桶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#toref" class="md-nav__link">
    <span class="md-ellipsis">
      toRef
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#torefs" class="md-nav__link">
    <span class="md-ellipsis">
      toRefs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toraw" class="md-nav__link">
    <span class="md-ellipsis">
      toRaw
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      计算属性
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      侦听属性
    </span>
  </a>
  
    <nav class="md-nav" aria-label="侦听属性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#watch" class="md-nav__link">
    <span class="md-ellipsis">
      watch
    </span>
  </a>
  
    <nav class="md-nav" aria-label="watch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      监听一个
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      监听多个：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reactive_2" class="md-nav__link">
    <span class="md-ellipsis">
      监听Reactive
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reactive_3" class="md-nav__link">
    <span class="md-ellipsis">
      只监听reactive的一个值
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#watcheffect" class="md-nav__link">
    <span class="md-ellipsis">
      watchEffect
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      组件&amp;生命周期
    </span>
  </a>
  
    <nav class="md-nav" aria-label="组件&生命周期">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#less-sass-scoped" class="md-nav__link">
    <span class="md-ellipsis">
      实操组件和认识less sass 和 scoped
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      父子组件传参
    </span>
  </a>
  
    <nav class="md-nav" aria-label="父子组件传参">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      父传子
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      子传父
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      子组件变量暴露给父组件
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      全局组件，局部组件，递归组件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="全局组件，局部组件，递归组件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      注册全局组件：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      递归组件
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      动态组件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slot" class="md-nav__link">
    <span class="md-ellipsis">
      插槽slot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="插槽slot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      匿名插槽
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      具名插槽
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      作用域插槽
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      动态插槽
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      内置组件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="内置组件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#teleport" class="md-nav__link">
    <span class="md-ellipsis">
      Teleport传送组件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keep-alive" class="md-nav__link">
    <span class="md-ellipsis">
      keep-alive缓存组件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transition" class="md-nav__link">
    <span class="md-ellipsis">
      transition 过渡组件
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#provide-inject" class="md-nav__link">
    <span class="md-ellipsis">
      依赖注入Provide / Inject
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bus" class="md-nav__link">
    <span class="md-ellipsis">
      兄弟组件传参和bus
    </span>
  </a>
  
    <nav class="md-nav" aria-label="兄弟组件传参和bus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      借助父组件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-bus" class="md-nav__link">
    <span class="md-ellipsis">
      Event Bus
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mitt" class="md-nav__link">
    <span class="md-ellipsis">
      mitt库
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tsx" class="md-nav__link">
    <span class="md-ellipsis">
      TSX
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#directive" class="md-nav__link">
    <span class="md-ellipsis">
      directive自定义指令
    </span>
  </a>
  
    <nav class="md-nav" aria-label="directive自定义指令">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#js" class="md-nav__link">
    <span class="md-ellipsis">
      js图片懒加载
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      样例简介
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      函数简写
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      图片懒加载
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attrs-hooks" class="md-nav__link">
    <span class="md-ellipsis">
      自定义attrs / hooks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="自定义attrs / hooks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#attrs" class="md-nav__link">
    <span class="md-ellipsis">
      自定义attrs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hooks" class="md-nav__link">
    <span class="md-ellipsis">
      自定义hooks
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      全局函数和变量
    </span>
  </a>
  
    <nav class="md-nav" aria-label="全局函数和变量">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      消除报错版
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      新的组件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="新的组件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1fragment" class="md-nav__link">
    <span class="md-ellipsis">
      1.Fragment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2teleport" class="md-nav__link">
    <span class="md-ellipsis">
      2.Teleport
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3suspense" class="md-nav__link">
    <span class="md-ellipsis">
      3.Suspense
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vue3_1" class="md-nav__link">
    <span class="md-ellipsis">
      其他vue3新特性
    </span>
  </a>
  
    <nav class="md-nav" aria-label="其他vue3新特性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1api" class="md-nav__link">
    <span class="md-ellipsis">
      1.全局API的转移
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      2.其他改变
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#css" class="md-nav__link">
    <span class="md-ellipsis">
      CSS特性
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CSS特性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      插槽选择器：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      全局选择器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#css-module" class="md-nav__link">
    <span class="md-ellipsis">
      css module
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-loop" class="md-nav__link">
    <span class="md-ellipsis">
      event loop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pinia" class="md-nav__link">
    <span class="md-ellipsis">
      pinia
    </span>
  </a>
  
    <nav class="md-nav" aria-label="pinia">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup-store" class="md-nav__link">
    <span class="md-ellipsis">
      Setup Store
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-store" class="md-nav__link">
    <span class="md-ellipsis">
      Option Store
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>小满VUE</h1>

<h3 id="vue3">Vue3<a class="headerlink" href="#vue3" title="Permanent link">&para;</a></h3>
<h4 id="_1">数组更新检测<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h4>
<p>一些操作数组的方法，编译会检测，从而会促使视图更新。</p>
<ul>
<li>
<p>变异方法</p>
</li>
<li>
<p><code>push()</code></p>
</li>
<li><code>pop()</code></li>
<li><code>shift()</code>  删除并返回第一个</li>
<li><code>unshift()</code>  向开头添加多个元素，返回新长度</li>
<li><code>splice()</code>   删除 / 删除并添加</li>
<li><code>sort()</code></li>
<li><code>reverse()</code></li>
</ul>
<p>上面这些数组操作方法，会直接改变原始数组称为变异方法，会促使视图自动更新。</p>
<ul>
<li>替换数组</li>
</ul>
<p>学了 JavaScript 标准对象库，都知道有些数组方法是不直接改变原数组的，这里称它们为非变异方法，例如：filter()、slice()、concat()，它们都是返回一个新数组，那么，在 Vue 中使用到这些方法，怎么样才能促使视图更新呢？我们就必须使用数组替换法，将非变异方法返回的新数组直接赋值给的旧数组。</p>
<div class="highlight"><pre><span></span><code><span class="k">this</span><span class="p">.</span><span class="nx">nav</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">nav</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">);</span>
</code></pre></div>
<ul>
<li>注意</li>
</ul>
<p>由于 JavaScript 的限制，Vue 不能检测以下变动的数组：</p>
<ol>
<li>当你利用索引直接设置一个项时，例如：<code>vm.items[indexOfItem] = newValue</code>。</li>
<li>当你修改数组的长度时，例如：<code>vm.items.length = newLength</code>。</li>
</ol>
<p>例子：</p>
<div class="highlight"><pre><span></span><code><span class="kd">var</span><span class="w"> </span><span class="nx">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Vue</span><span class="p">({</span>
<span class="w">  </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">items</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="p">],</span>
<span class="w">  </span><span class="p">},</span>
<span class="p">});</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">items</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;x&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// 不是响应性的</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span><span class="w"> </span><span class="c1">// 不是响应性的</span>
</code></pre></div>
<p>上去直接这样改值操作是没有问题的，但是不是响应式的，并不能触发视图更新，需要用其他方法代替。</p>
<p>例如这样的操作 <code>app.items[indexOfItem] = newValue</code> ，可以用以下两种代替。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Vue.set</span>
<span class="nx">Vue</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">vm</span><span class="p">.</span><span class="nx">items</span><span class="p">,</span><span class="w"> </span><span class="nx">indexOfItem</span><span class="p">,</span><span class="w"> </span><span class="nx">newValue</span><span class="p">);</span>
<span class="c1">// Array.prototype.splice</span>
<span class="nx">vm</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">indexOfItem</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">newValue</span><span class="p">);</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>// 不加括号
<span class="p">&lt;</span><span class="nt">span</span> <span class="na">v-for</span><span class="o">=</span><span class="s">&quot;number in oddNumber&quot;</span><span class="p">&gt;</span>{{number}}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
computed: {
          // 计算 numberArray 中为奇数的 oddNumber 奇数数组
          oddNumber: function () {
            return this.numberArray.filter(function (number) {
              return number % 2 === 1;
            });
          }
//加括号
<span class="p">&lt;</span><span class="nt">span</span> <span class="na">v-for</span><span class="o">=</span><span class="s">&quot;number in getOddNumber()&quot;</span><span class="p">&gt;</span>{{number}}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
methods: {
          // 定一个一个获取数组内奇数的方法 filter 数组对象的过滤方法
          getOddNumber: function () {
            return this.numberArray.filter(function (number) {
              return number % 2 === 1;
            });
          },
        }
</code></pre></div>
<h4 id="_2">表单处理<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h4>
<p><a href="https://cn.vuejs.org/examples/#form-bindings">https://cn.vuejs.org/examples/#form-bindings</a></p>
<h5 id="v-module">v-module<a class="headerlink" href="#v-module" title="Permanent link">&para;</a></h5>
<ul>
<li>只适用于input标签</li>
<li>便捷地设置和获取表单元素的值</li>
<li>绑定的数据会和表单元素值相关联</li>
<li>绑定的数据 &harr; 表单元素的值：双向绑定</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;app&quot;</span><span class="o">&gt;</span>
<span class="w">    </span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">ref</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">input</span><span class="w"> </span><span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="w"> </span><span class="nx">v</span><span class="o">-</span><span class="nx">model</span><span class="o">=</span><span class="s2">&quot;message&quot;</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>

<span class="kd">let</span><span class="w"> </span><span class="nx">app</span><span class="o">=</span><span class="ow">new</span><span class="w"> </span><span class="nx">Vue</span><span class="p">({</span>
<span class="w">    </span><span class="nx">el</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#app&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;黑馬程序員&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">})</span>
</code></pre></div>
<h5 id="_3">常用表单元素<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>元素</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>input[type=*]</td>
<td>文本输入框</td>
</tr>
<tr>
<td>textarea</td>
<td>多行文本</td>
</tr>
<tr>
<td>radio</td>
<td>单选按钮</td>
</tr>
<tr>
<td>checkbox</td>
<td>复选框</td>
</tr>
<tr>
<td>select</td>
<td>选择框</td>
</tr>
</tbody>
</table>
<p><mark>注意</mark></p>
<p><strong>注意一</strong>：<code>v-model</code> 会忽略所有表单元素的  <code>value</code>、<code>checked</code>、<code>selected</code> 特性的初始值而总是将 Vue 实例的数据作为数据来源。直接给元素 value 赋值不会生效的，你应该通过 JavaScript 在组件的 <code>data</code> 选项中声明初始值。</p>
<p><strong>注意二</strong>：<code>v-model</code> 在内部使用不同的属性为不同的输入元素并抛出不同的事件，具体体现我们在表单 <strong>修饰符小节</strong>，给大家说明：</p>
<ul>
<li>
<p>text 和 textarea 元素使用 <code>value</code> 属性和 <code>input</code> 事件（内部监听 input 事件）；</p>
</li>
<li>
<p>checkbox 和 radio 使用 <code>checked</code> 属性和 <code>change</code> 事件（内部监听 change 事件）；</p>
</li>
<li>
<p>select 字段将 <code>value</code> 作为 prop 并将 <code>change</code> 作为事件（内部监听 change 事件）。</p>
</li>
</ul>
<p><strong>说明：</strong> change 和 input 区别就是，input 实时更新数据，change 不是实时更新</p>
<h5 id="_4">单选按钮<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h5>
<p>将单选按钮绑定到同一个 picked，即可完成数据绑定</p>
<p>当第一个单选被选中 picked 的值为第一个单选按钮的 value，</p>
<p>同样当第二个单选被选中 picked 的值为第二个单选按钮的 value。</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;app&quot;</span><span class="p">&gt;</span>
      <span class="cm">&lt;!-- 将单选按钮绑定到同一个 picked --&gt;</span>
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;one&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;One&quot;</span> <span class="na">v-model</span><span class="o">=</span><span class="s">&quot;picked&quot;</span> <span class="p">/&gt;</span>
      <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;one&quot;</span><span class="p">&gt;</span>One<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;two&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Two&quot;</span> <span class="na">v-model</span><span class="o">=</span><span class="s">&quot;picked&quot;</span> <span class="p">/&gt;</span>
      <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;two&quot;</span><span class="p">&gt;</span>Two<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>Picked: {{ picked }}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">      </span><span class="kd">var</span><span class="w"> </span><span class="nx">vue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Vue</span><span class="p">({</span>
<span class="w">        </span><span class="nx">el</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;#app&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">data</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">picked</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="p">};</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</code></pre></div>
<h5 id="_5">复选框<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h5>
<p>复选框绑定的是一个布尔值（true or false），同样在复选框元素上使用 <code>v-model</code> 指令，在实例 data 中声明 checked，即可完成复选框数据的双向绑定。</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;app&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">v-model</span><span class="o">=</span><span class="s">&quot;checked&quot;</span> <span class="p">/&gt;</span>
      <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span><span class="p">&gt;</span>{{ checked }}<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">      </span><span class="c1">// 绑定布尔值</span>
<span class="w">      </span><span class="kd">var</span><span class="w"> </span><span class="nx">vue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Vue</span><span class="p">({</span>
<span class="w">        </span><span class="nx">el</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;#app&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">data</span><span class="o">:</span><span class="p">{</span>
<span class="w">            </span><span class="nx">checked</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</code></pre></div>
<p><code>v-module='check'</code>表示</p>
<ul>
<li>
<p>当选中时，把<code>check = value</code>绑定</p>
</li>
<li>
<p>如果不存在<code>value</code>，则<code>check</code>为布尔值</p>
</li>
</ul>
<h5 id="_6">修饰符<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h5>
<p><mark>lazy</mark></p>
<p>开始介绍表单处理时，我们说了几点注意，不同的元素，使用的值不同，抛出的事件也不同。</p>
<p>可能开发中，我们不需要数据实时更新，那么，我们怎么将 input 事件与 change 事件替换，</p>
<p>可以使用 <strong>.lazy</strong> 修饰符，可以将抛出事件由 input 改为 change，使表单元素惰性更新，不实时更新。</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;app&quot;</span><span class="p">&gt;</span>
      <span class="cm">&lt;!--使用 .lazy 修饰符将文本框 抛出的事件改为 change 事件，不再实时更新，只有文本框失去焦点才更新数据 惰性更新 --&gt;</span>
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">v-model</span><span class="err">.</span><span class="na">lazy</span><span class="o">=</span><span class="s">&quot;msg&quot;</span> <span class="p">/&gt;</span>
      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{msg}}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">      </span><span class="kd">var</span><span class="w"> </span><span class="nx">vue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Vue</span><span class="p">({</span>
<span class="w">        </span><span class="nx">el</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;#app&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">msg</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</code></pre></div>
<p><strong>只有文本框失去焦点才更新数据</strong></p>
<p><mark>number</mark></p>
<p>自动将用户的输入值转为数值类型</p>
<p>即使在  <code>type="number"</code> 时，HTML 输入元素的值也会返回字符串（默认）</p>
<p><mark>trim</mark></p>
<p>过滤首尾空格</p>
<h4 id="_7">响应式修改<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h4>
<p><img alt="image-20230902171945781" src="image-20230902171945781.png" /></p>
<h4 id="ref">Ref全家桶<a class="headerlink" href="#ref" title="Permanent link">&para;</a></h4>
<h5 id="ref_1">ref<a class="headerlink" href="#ref_1" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>&lt;script  lang=&#39;ts&#39;&gt;
export default {
  data(){
    return{
      age:18
    }
  }
}
&lt;/script&gt;
</code></pre></div>
<p>以前，只有<code>age:18</code>这样的才是响应式对象</p>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
&lt;div&gt;{{ Man }}&lt;/div&gt;
&lt;button @click=&quot;change&quot;&gt;&lt;/button&gt;
&lt;/template&gt;

&lt;script setup lang=&#39;ts&#39;&gt;
import { ref } from &#39;vue&#39;
type M = {
  name:string
}
const Man = ref&lt;M&gt;({ name: &#39;小满&#39; })

function change() {
  Man.value.name = &#39;慢慢慢&#39;
  console.log(Man);
}
&lt;/script&gt;

&lt;style scoped&gt;

&lt;/style&gt;
</code></pre></div>
<p>可以这样</p>
<ul>
<li><code>ref()</code>构造函数返回的对象有一个<code>value</code>属性，指向他的内部值</li>
</ul>
<p><img alt="image-20230902210547501" src="image-20230902210547501.png" /></p>
<h5 id="isref">isRef<a class="headerlink" href="#isref" title="Permanent link">&para;</a></h5>
<p><code>isRef(Man)</code>：判断一个对象是不是<code>ref</code>对象</p>
<ul>
<li>isRef: 检查一个值是否为一个 ref 对象</li>
<li>isReactive: 检查一个对象是否是由 <code>reactive</code> 创建的响应式代理</li>
<li>isReadonly: 检查一个对象是否是由 <code>readonly</code> 创建的只读代理</li>
<li>isProxy: 检查一个对象是否是由 <code>reactive</code> 或者 <code>readonly</code> 方法创建的代理</li>
</ul>
<h5 id="shallowref">shallowRef<a class="headerlink" href="#shallowref" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>&lt;script setup lang=&#39;ts&#39;&gt;
import { shallowRef } from &#39;vue&#39;
const Man = shallowRef({ name: &#39;小满&#39; })

function change() {
  Man.value = {
    name:&#39;慢慢慢&#39;
  }
  console.log(Man);
}
&lt;/script&gt;
</code></pre></div>
<p><code>shallowRef</code>是浅层的响应式，属性需要直接挂载到<code>Man.value</code>上，它的响应式只到<code>.value</code>上</p>
<p>（内部会更新，但不会响应式地渲染到页面上）</p>
<p><strong>注意：</strong><code>ref</code>和<code>shallowRef</code>不可以混写，否则会影响<code>shallowRef</code>，造成视图的更新</p>
<div class="highlight"><pre><span></span><code>&lt;script setup lang=&#39;ts&#39;&gt;
import { ref, shallowRef } from &#39;vue&#39;
const Man = ref({ name: &#39;小满&#39; })
const Man2 = shallowRef({ name: &#39;小满&#39; })

function change() {
  Man.value.name = &#39;慢慢慢&#39;;
  Man2.value = &#39;慢慢慢&#39;;
  console.log(Man);
  console.log(Man2);
}
&lt;/script&gt;
</code></pre></div>
<h5 id="triggerref">triggerRef<a class="headerlink" href="#triggerref" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>&lt;script setup lang=&#39;ts&#39;&gt;
import { ref, shallowRef, triggerRef } from &#39;vue&#39;
const Man2 = shallowRef({ name: &#39;小满&#39; })

function change() {
  triggerRef(Man2);
  Man2.value.name = &#39;慢慢慢&#39;;
  console.log(Man2);
}
&lt;/script&gt;
</code></pre></div>
<p><code>triggerRef</code>会强制更新<code>shallowRef</code>对象</p>
<h5 id="customref">customRef<a class="headerlink" href="#customref" title="Permanent link">&para;</a></h5>
<ul>
<li>
<p>自定义ref </p>
</li>
<li>
<p>customRef 是个工厂函数要求我们返回一个对象 并且实现 get 和 set 适合去做防抖之类的</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code>&lt;script setup lang=&#39;ts&#39;&gt;
import { ref, reactive, onMounted, shallowRef, customRef } from &#39;vue&#39;

function myRef&lt;T = any&gt;(value: T) {
  let timer:any;
  return customRef((track, trigger) =&gt; {
    return {
      get() {
        track()
        return value
      },
      set(newVal) {
        clearTimeout(timer)
        timer =  setTimeout(() =&gt; {
          console.log(&#39;触发了set&#39;)
          value = newVal
          trigger()
        },500)
      }
    }
  })
}

const name = myRef&lt;string&gt;(&#39;小满&#39;)
const change = () =&gt; {
  name.value = &#39;大满&#39;
}
&lt;/script&gt;
</code></pre></div>
<h5 id="_8">模版引用<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h5>
<p><code>ref</code>可以获取dom属性</p>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
  &lt;div ref=&quot;div&quot;&gt;小满Ref&lt;/div&gt;
  &lt;hr&gt;
  &lt;div ref=&quot;dom&quot;&gt;我是dom&lt;/div&gt;
  &lt;hr&gt;
  &lt;button @click=&quot;change&quot;&gt;修改 customRef&lt;/button&gt;
&lt;/template&gt;

&lt;script setup lang=&#39;ts&#39;&gt;
import { ref, reactive, onMounted, shallowRef, customRef } from &#39;vue&#39;
const dom = ref&lt;HTMLDivElement&gt;()

const change = () =&gt; {
  console.log(dom.value?.innerHTML);
}

&lt;/script&gt;
&lt;style scoped&gt;
&lt;/style&gt;
</code></pre></div>
<p><code>ref='name'</code>和<code>name=ref()</code>的name要求一致</p>
<h4 id="reactive">reactive全家桶<a class="headerlink" href="#reactive" title="Permanent link">&para;</a></h4>
<h5 id="reactive_1">reactive<a class="headerlink" href="#reactive_1" title="Permanent link">&para;</a></h5>
<ul>
<li><code>ref</code>支持所有类型，<code>reactive</code>只支持引用类型</li>
<li><code>ref</code>取值赋值都需要通过<code>.value</code>，<code>reactive</code>不需要</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="nx">form</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">ul</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">li</span><span class="w"> </span><span class="nx">v</span><span class="o">-</span><span class="k">for</span><span class="o">=</span><span class="s2">&quot;item in list&quot;</span><span class="o">&gt;</span><span class="p">{{</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="p">}}</span><span class="o">&lt;</span><span class="err">/li&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/ul&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="err">@</span><span class="nx">click</span><span class="p">.</span><span class="nx">prevent</span><span class="o">=</span><span class="s2">&quot;add&quot;</span><span class="o">&gt;</span><span class="nx">添加</span><span class="o">&lt;</span><span class="err">/button&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="err">/form&gt;</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="o">&lt;</span><span class="err">/template&gt;</span>

<span class="o">&lt;</span><span class="nx">script</span><span class="w"> </span><span class="nx">setup</span><span class="w"> </span><span class="nx">lang</span><span class="o">=</span><span class="s1">&#39;ts&#39;</span><span class="o">&gt;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">reactive</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">reactive</span><span class="o">&lt;</span><span class="nx">string</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">([])</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;EDG&quot;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;REW&#39;</span><span class="p">];</span>
<span class="w">    </span><span class="nx">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">res</span><span class="p">;</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">list</span><span class="p">);</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="mf">2000</span><span class="p">)</span>
<span class="p">]</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>
<span class="o">&lt;</span><span class="nx">style</span><span class="w"> </span><span class="nx">scoped</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="err">/style&gt;</span>
</code></pre></div>
<p>这样并不能把res的内容渲染到list里面。因为<code>list</code>是<code>reactive proxy</code>值，不能直接复制，否则会破坏响应式对象</p>
<p>但是可以<code>push</code>：</p>
<div class="highlight"><pre><span></span><code><span class="nx">list</span><span class="p">.</span><span class="nx">push</span><span class="p">(..</span><span class="nx">res</span><span class="p">)</span>
</code></pre></div>
<h5 id="readonly">readonly<a class="headerlink" href="#readonly" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>&lt;script setup lang=&#39;ts&#39;&gt;
import {reactive, readonly} from &#39;vue&#39;
let obj = reactive({ name: &#39;小满&#39; });
const read = readonly(obj)
// read.name=&#39;sss&#39;  // 无法为“name”赋值，因为它是只读属性。
&lt;/script&gt;
</code></pre></div>
<p>这样可以改变<code>readonly</code>对象的属性</p>
<div class="highlight"><pre><span></span><code>&lt;script setup lang=&#39;ts&#39;&gt;
import {reactive, readonly} from &#39;vue&#39;
let obj = reactive({ name: &#39;小满&#39; });
const read = readonly(obj)
// read.name=&#39;sss&#39;

const show = () =&gt; {
  obj.name = &#39;sss&#39;;
  console.log(obj, read);
}
&lt;/script&gt;
</code></pre></div>
<h5 id="shallowreactive">shallowReactive<a class="headerlink" href="#shallowreactive" title="Permanent link">&para;</a></h5>
<p>浅层的<code>Reactive</code>：</p>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
&lt;div&gt;
  &lt;form&gt;
    &lt;div&gt;{{ obj }}&lt;/div&gt;
    &lt;button @click.prevent=&quot;show&quot;&gt;展示&lt;/button&gt;
  &lt;/form&gt;
&lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&#39;ts&#39;&gt;
import {reactive, readonly, shallowReactive} from &#39;vue&#39;
let obj = shallowReactive({
  name: {
    value: {
      key: 1
    }
  }
})
const show = () =&gt; {
  obj.name.value.key = 1111;
  console.log(obj);
}
&lt;/script&gt;
&lt;style scoped&gt;
&lt;/style&gt;
</code></pre></div>
<p><code>shallowReactive</code>也会被<code>Reactive</code>修改</p>
<h4 id="to">to系列全家桶<a class="headerlink" href="#to" title="Permanent link">&para;</a></h4>
<h5 id="toref">toRef<a class="headerlink" href="#toref" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
&lt;div&gt;
  &lt;form&gt;
    &lt;div&gt;{{ obj }}&lt;/div&gt;
    &lt;button @click.prevent=&quot;change&quot;&gt;展示&lt;/button&gt;
  &lt;/form&gt;
&lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&#39;ts&#39;&gt;
import {reactive, readonly, shallowReactive} from &#39;vue&#39;
let obj = {name:111}
const change = () =&gt; {
  obj.name = 12334;
  console.log(obj);
}
&lt;/script&gt;
&lt;style scoped&gt;
&lt;/style&gt;
</code></pre></div>
<p>这样只能修改值，修改不了视图，<strong>不是响应式的</strong></p>
<div class="highlight"><pre><span></span><code>&lt;script setup lang=&#39;ts&#39;&gt;
import {reactive, readonly, shallowReactive, toRef} from &#39;vue&#39;
let obj = { name: 111, like:&#39;JK&#39; }
let like = toRef(obj, &#39;like&#39;); // toRef应该这样使用
const change = () =&gt; {
  like.value = &#39;百褶裙&#39;; // 要加value才能访问属性
  console.log(obj);
}
&lt;/script&gt;
</code></pre></div>
<p>这样也不行，因为<code>toRef</code>只能用给响应式对象：</p>
<p><img alt="image-20230903113559397" src="image-20230903113559397.png" /></p>
<p>这样是正确的</p>
<div class="highlight"><pre><span></span><code>&lt;script setup lang=&#39;ts&#39;&gt;
import {reactive, readonly, shallowReactive, toRef} from &#39;vue&#39;
let obj = reactive({ name: 111, like: &#39;JK&#39; });
let like = toRef(obj, &#39;like&#39;);
const change = () =&gt; {
  like.value = &#39;百褶裙&#39;;
  console.log(obj);
}
&lt;/script&gt;
</code></pre></div>
<p><img alt="image-20230903113814077" src="image-20230903113814077.png" /></p>
<h5 id="torefs">toRefs<a class="headerlink" href="#torefs" title="Permanent link">&para;</a></h5>
<p>对每个属性都调用一遍<code>toRef</code></p>
<p>手动实现：</p>
<div class="highlight"><pre><span></span><code>const toRefs = &lt;T extends object&gt;(object: T) =&gt; {
  const map: any = {};
  for (let key in object) {
    map[key]=toRef(object, key)
  }
  return map;
}
</code></pre></div>
<h5 id="toraw">toRaw<a class="headerlink" href="#toraw" title="Permanent link">&para;</a></h5>
<p>脱去代理</p>
<div class="highlight"><pre><span></span><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span><span class="w"> </span><span class="nx">toRaw</span><span class="p">(</span><span class="nx">obj</span><span class="p">));</span>
</code></pre></div>
<p><img alt="image-20230903115658432" src="image-20230903115658432.png" /></p>
<h4 id="_9">计算属性<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h4>
<p>计算属性就是当依赖的属性的值发生变化的时候，才会触发他的更改，如果依赖的值，不发生变化的时候，使用的是缓存中的属性值。</p>
<p>在<code>script</code>中访问时要加上<code>.value</code></p>
<ol>
<li>函数形式（常用，只设置setter）</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">computed</span><span class="p">,</span><span class="w"> </span><span class="nx">reactive</span><span class="p">,</span><span class="w"> </span><span class="nx">ref</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">price</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span><span class="c1">//$0</span>

<span class="kd">let</span><span class="w"> </span><span class="nx">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">computed</span><span class="o">&lt;</span><span class="nx">string</span><span class="o">&gt;</span><span class="p">(()=&gt;{</span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="sb">`$`</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">price</span><span class="p">.</span><span class="nx">value</span>
<span class="p">})</span>

<span class="nx">price</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">500</span>
</code></pre></div>
<ol>
<li>对象形式</li>
</ol>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
   &lt;div&gt;{{ mul }}&lt;/div&gt;
   &lt;div @click=&quot;mul = 100&quot;&gt;click&lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
import { computed, ref } from &#39;vue&#39;
let price = ref&lt;number | string&gt;(1)//$0
let mul = computed({
   get: () =&gt; {
      return price.value
   },
   set: (value) =&gt; {
      price.value = &#39;set&#39; + value
   }
})
&lt;/script&gt;

&lt;style&gt;
&lt;/style&gt;
</code></pre></div>
<h4 id="_10">侦听属性<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h4>
<h5 id="watch">watch<a class="headerlink" href="#watch" title="Permanent link">&para;</a></h5>
<p><code>watch</code> 需要侦听特定的数据源，并在单独的回调函数中执行副作用</p>
<ol>
<li>
<p>watch第一个参数监听源</p>
</li>
<li>
<p>watch第二个参数回调函数cb（newVal,oldVal）</p>
</li>
<li>
<p>watch第三个参数一个options配置项是一个对象：</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nx">immediate</span><span class="o">:</span><span class="kc">true</span><span class="w"> </span><span class="c1">//是否立即调用一次</span>
<span class="w">    </span><span class="nx">deep</span><span class="o">:</span><span class="kc">true</span><span class="w"> </span><span class="c1">//是否开启深度监听</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li>默认是浅层监听</li>
</ul>
<p>实例：</p>
<h6 id="_11">监听一个<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h6>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ref</span><span class="p">,</span><span class="w"> </span><span class="nx">watch</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>

<span class="kd">let</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">({</span>
<span class="w">    </span><span class="nx">nav</span><span class="o">:</span><span class="p">{</span>
<span class="w">        </span><span class="nx">bar</span><span class="o">:</span><span class="p">{</span>
<span class="w">            </span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">})</span>

<span class="nx">watch</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">newVal</span><span class="p">,</span><span class="w"> </span><span class="nx">oldVal</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;新的值----&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">newVal</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;旧的值----&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">oldVal</span><span class="p">);</span>
<span class="p">},{</span>
<span class="w">    </span><span class="nx">immediate</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nx">deep</span><span class="o">:</span><span class="kc">true</span>
<span class="p">})</span>
</code></pre></div>
<h6 id="_12">监听多个：<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h6>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ref</span><span class="p">,</span><span class="w"> </span><span class="nx">watch</span><span class="w"> </span><span class="p">,</span><span class="nx">reactive</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>

<span class="kd">let</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">message2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

<span class="nx">watch</span><span class="p">([</span><span class="nx">message</span><span class="p">,</span><span class="nx">message2</span><span class="p">],</span><span class="w"> </span><span class="p">(</span><span class="nx">newVal</span><span class="p">,</span><span class="w"> </span><span class="nx">oldVal</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;新的值----&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">newVal</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;旧的值----&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">oldVal</span><span class="p">);</span>
<span class="p">})</span>
</code></pre></div>
<h6 id="reactive_2">监听Reactive<a class="headerlink" href="#reactive_2" title="Permanent link">&para;</a></h6>
<p>使用reactive监听深层对象开启和不开启deep 效果一样</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ref</span><span class="p">,</span><span class="w"> </span><span class="nx">watch</span><span class="w"> </span><span class="p">,</span><span class="nx">reactive</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>

<span class="kd">let</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">reactive</span><span class="p">({</span>
<span class="w">    </span><span class="nx">nav</span><span class="o">:</span><span class="p">{</span>
<span class="w">        </span><span class="nx">bar</span><span class="o">:</span><span class="p">{</span>
<span class="w">            </span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">})</span>
<span class="nx">watch</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">newVal</span><span class="p">,</span><span class="w"> </span><span class="nx">oldVal</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;新的值----&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">newVal</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;旧的值----&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">oldVal</span><span class="p">);</span>
<span class="p">})</span>
</code></pre></div>
<h6 id="reactive_3">只监听reactive的一个值<a class="headerlink" href="#reactive_3" title="Permanent link">&para;</a></h6>
<p>需要是一个函数的返回值</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ref</span><span class="p">,</span><span class="w"> </span><span class="nx">watch</span><span class="w"> </span><span class="p">,</span><span class="nx">reactive</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>

<span class="kd">let</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">reactive</span><span class="p">({</span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">name2</span><span class="o">:</span><span class="s2">&quot;&quot;</span>
<span class="p">})</span>
<span class="nx">watch</span><span class="p">(()=&gt;</span><span class="nx">message</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">newVal</span><span class="p">,</span><span class="w"> </span><span class="nx">oldVal</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;新的值----&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">newVal</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;旧的值----&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">oldVal</span><span class="p">);</span>
<span class="p">})</span>
</code></pre></div>
<h5 id="watcheffect">watchEffect<a class="headerlink" href="#watcheffect" title="Permanent link">&para;</a></h5>
<p>详见：<a href="https://xiaoman.blog.csdn.net/article/details/122802130">小满vue-watchEffect</a></p>
<p>（页面加载的时候会立即执行一次）</p>
<p>立即执行传入的一个函数，同时响应式追踪其依赖，并在其依赖变更时重新运行该函数。</p>
<p>如果用到message 就只会监听message 就是用到几个监听几个 而且是非惰性 会默认调用一次</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="o">&lt;</span><span class="nx">string</span><span class="o">&gt;</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">message2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="o">&lt;</span><span class="nx">string</span><span class="o">&gt;</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="w"> </span><span class="nx">watchEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">//console.log(&#39;message&#39;, message.value);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;message2&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">message2</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
<span class="p">})</span>
</code></pre></div>
<h4 id="_13">组件&amp;生命周期<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h4>
<p>引入：</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="nx">form</span><span class="w"> </span><span class="s1">&#39;./components/aaa.vue&#39;</span>
</code></pre></div>
<p><code>A</code>可以为任意名称</p>
<p>使用：</p>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
    &lt;A&gt;&lt;/A&gt;
    &lt;A&gt;&lt;/A&gt;
&lt;/template&gt;
</code></pre></div>
<p>生命周期：</p>
<ol>
<li>
<p>在setup语法糖模式下，没有<code>before</code>、<code>created</code>这两个生命周期，可以用<code>setup</code>代替</p>
</li>
<li>
<p>onBeforeMount()
   在组件DOM实际渲染安装之前调用。在这一步中，根元素还不存在。</p>
</li>
<li>
<p>onMounted()
   在组件的第一次渲染后调用，该元素现在可用，允许直接DOM访问
   <code>v-if</code>会触发这两个，但<code>v-show</code>不会</p>
</li>
<li>
<p>onBeforeUpdate()
   数据更新时调用，发生在虚拟 DOM 打补丁之前。</p>
</li>
<li>
<p>onUpdated()
   DOM更新后，updated的方法即会调用。</p>
</li>
<li>
<p>onBeforeUnmount()
   在卸载组件实例之前调用。在这个阶段，实例仍然是完全正常的。</p>
</li>
<li>
<p>onUnmounted()
   卸载组件实例后调用。调用此钩子时，组件实例的所有指令都被解除绑定，所有事件侦听器都被移除，所有子组件实例被卸载。</p>
</li>
</ol>
<h5 id="less-sass-scoped">实操组件和认识less sass 和 scoped<a class="headerlink" href="#less-sass-scoped" title="Permanent link">&para;</a></h5>
<p>bem架构：</p>
<p>他是一种css架构 <strong>oocss 实现的一种 （面向对象css） ，</strong><code>BEM</code>实际上是<code>block</code>、<code>element</code>、<code>modifier</code>的缩写，分别为块层、元素层、修饰符层，element UI 也使用的是这种架构</p>
<p>BEM 命名约定的模式是：</p>
<div class="highlight"><pre><span></span><code><span class="p">.</span><span class="nc">block</span><span class="w"> </span><span class="p">{}</span>

<span class="p">.</span><span class="nc">block__element</span><span class="w"> </span><span class="p">{}</span>

<span class="p">.</span><span class="nc">block--modifier</span><span class="w"> </span><span class="p">{}</span>
</code></pre></div>
<p>使用sass 最小单元复刻一个bem 架构（写在<code>./src/bem.scss</code>中）：</p>
<div class="highlight"><pre><span></span><code><span class="nv">$block-sel</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="w"> </span><span class="nv">!default</span><span class="p">;</span>
<span class="nv">$element-sel</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;__&quot;</span><span class="w"> </span><span class="nv">!default</span><span class="p">;</span>
<span class="nv">$modifier-sel</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;--&quot;</span><span class="w"> </span><span class="nv">!default</span><span class="p">;</span>
<span class="nv">$namespace</span><span class="o">:</span><span class="s1">&#39;xm&#39;</span><span class="w"> </span><span class="nv">!default</span><span class="p">;</span>
<span class="k">@mixin</span><span class="nf"> bfc</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">height</span><span class="nd">:</span><span class="w"> </span><span class="nt">100</span><span class="err">%</span><span class="o">;</span>
<span class="w">    </span><span class="nt">overflow</span><span class="nd">:</span><span class="w"> </span><span class="nt">hidden</span><span class="o">;</span>
<span class="p">}</span>

<span class="c1">//混入</span>
<span class="k">@mixin</span><span class="nf"> b</span><span class="p">(</span><span class="nv">$block</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="nv">$B</span><span class="o">:</span><span class="w"> </span><span class="nv">$namespace</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">$block-sel</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">$block</span><span class="p">;</span><span class="w"> </span><span class="c1">//变量</span>
<span class="w">   </span><span class="nc">.</span><span class="si">#{</span><span class="nv">$B</span><span class="si">}</span><span class="p">{</span><span class="w"> </span><span class="c1">//插值语法#{}</span>
<span class="w">     </span><span class="k">@content</span><span class="o">;</span><span class="w"> </span><span class="o">//</span><span class="nt">内容替换</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">@mixin</span><span class="nf"> flex</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">display</span><span class="nd">:</span><span class="w"> </span><span class="nt">flex</span><span class="o">;</span>
<span class="p">}</span>

<span class="k">@mixin</span><span class="nf"> e</span><span class="p">(</span><span class="nv">$element</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nv">$selector</span><span class="o">:&amp;</span><span class="p">;</span>
<span class="w">    </span><span class="k">@at-root</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nn">#</span><span class="p">{</span><span class="err">$</span><span class="nt">selector</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="err">$</span><span class="nt">element-sel</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="err">$</span><span class="nt">element</span><span class="p">}</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">@content</span><span class="o">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">@mixin</span><span class="nf"> m</span><span class="p">(</span><span class="nv">$modifier</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nv">$selector</span><span class="o">:&amp;</span><span class="p">;</span>
<span class="w">    </span><span class="k">@at-root</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nn">#</span><span class="p">{</span><span class="err">$</span><span class="nt">selector</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="err">$</span><span class="nt">modifier-sel</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="err">$</span><span class="nt">modifier</span><span class="p">}</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">@content</span><span class="o">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>全局扩充scss，（在<code>./vite/config.ts</code>文件中）：</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">defineConfig</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vite&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">vue</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@vitejs/plugin-vue&#39;</span>

<span class="c1">// https://vitejs.dev/config/</span>
<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="nx">defineConfig</span><span class="p">({</span>
<span class="w">    </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">vue</span><span class="p">()],</span>
<span class="w">    </span><span class="nx">css</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">preprocessorOptions</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">scss</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">additionalData</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;@import &#39;./src/bem.scss&#39;;&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">})</span>
</code></pre></div>
<h4 id="_14">父子组件传参<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h4>
<h5 id="_15">父传子<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h5>
<ul>
<li>
<p>父组件用<code>v-bind</code>也就是<code>:</code>，把这个写在template中子组件的标签上</p>
</li>
<li>
<p>子组件用<code>defineProps</code>接收，有三种写法。</p>
</li>
</ul>
<p><code>defineProps</code> 接收与 <code>props</code> 选项相同的值，<code>defineEmits</code> 接收与 <code>emits</code> 选项相同的值。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// 非setup</span>

<span class="c1">// 第一种数组方式</span>
<span class="nx">props</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">xxx</span><span class="p">,</span><span class="w"> </span><span class="nx">xxx</span><span class="p">,</span><span class="w"> </span><span class="nx">xxx</span><span class="p">]</span>
<span class="c1">// 第二种对象方式</span>
<span class="nx">props</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">xxx</span><span class="o">:</span><span class="w"> </span><span class="nb">Number</span><span class="p">,</span><span class="w"> </span><span class="nx">xxx</span><span class="o">:</span><span class="w"> </span><span class="nb">String</span><span class="p">}</span>
<span class="c1">// 第三种对象嵌套对象方式</span>
<span class="nx">props</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">xxx</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">//类型不匹配会警告</span>
<span class="w">        </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nb">Number</span><span class="p">,</span>
<span class="w">        </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">        </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="c1">// 返回值不是 true,会警告</span>
<span class="w">        </span><span class="nx">validator</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">val</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">10</span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>父组件发送：</p>
<p>直接使用<code>v-bind:</code></p>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
&lt;waterFall :title=&quot;name&quot;&gt; &lt;/waterFall&gt;
&lt;/template&gt;

&lt;script setup lang=&#39;ts&#39;&gt;
import waterFall from &quot;./components/water-fall.vue&quot;;
let name=&#39;小满&#39;
&lt;/script&gt;

&lt;style scoped&gt;&lt;/style&gt;
</code></pre></div>
<p>子组件接收：</p>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
&lt;div&gt;子集&lt;/div&gt;
&lt;div&gt;值：{{ title }}&lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
import { ref, reactive } from &#39;vue&#39;;
const props = defineProps({
  title: {
    type: String,
    default: &quot;默认值&quot;
  },
    // 对象或数组的默认值，须从一个工厂函数返回。
    // 该函数接收组件所接收到的原始 prop 作为参数
  imageList:{
      type:Array,
      default:()=&gt;[]
  }

})
console.log(props.title);
&lt;/script&gt;

&lt;style scoped lang=&quot;scss&quot;&gt;
&lt;/style&gt;
</code></pre></div>
<p>可以在<code>template</code>中直接使用，但在<code>script</code>中使用时，要加上<code>props.</code></p>
<p>使用ts写法：</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ref</span><span class="p">,</span><span class="w"> </span><span class="nx">reactive</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="nx">withDefaults</span><span class="p">(</span><span class="nx">defineProps</span><span class="o">&lt;</span><span class="p">{</span>
<span class="w">  </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">,</span>
<span class="w">  </span><span class="nx">arr</span><span class="o">:</span><span class="nx">number</span><span class="p">[]</span>
<span class="p">}</span><span class="o">&gt;</span><span class="p">(),</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">arr</span><span class="o">:</span><span class="w"> </span><span class="p">()=&gt;[</span><span class="mf">666</span><span class="p">]</span>
<span class="p">})</span>
</code></pre></div>
<h5 id="_16">子传父<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h5>
<ul>
<li>传递**事件**</li>
<li>父组件使用<code>@</code>给子组件绑定事件</li>
<li>子组件使用<code>defineEmits</code>接收一个事件数组</li>
<li>结果：子组件可以调用父组件的函数</li>
</ul>
<p>子：</p>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
&lt;div&gt;子集&lt;/div&gt;
&lt;button @click=&quot;send&quot;&gt;给父组件传值&lt;/button&gt;
&lt;/template&gt;


&lt;script setup lang=&quot;ts&quot;&gt;
const emit=defineEmits([&#39;on-click&#39;])
const send = () =&gt; {
    emit(&#39;on-click&#39;, &#39;小满&#39;)
}
&lt;/script&gt;


&lt;style scoped lang=&quot;scss&quot;&gt;

&lt;/style&gt;    
</code></pre></div>
<p>使用ts：</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">emit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">defineEmits</span><span class="o">&lt;</span><span class="p">{</span>
<span class="w">    </span><span class="p">(</span><span class="nx">e</span><span class="o">:</span><span class="s1">&#39;on-click&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="nx">string</span><span class="p">)</span><span class="o">:</span><span class="ow">void</span>
<span class="p">}</span><span class="o">&gt;</span><span class="p">()</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">send</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;on-click&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;小满&#39;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>父：</p>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
&lt;waterFall @on-click=&quot;getName&quot;&gt; &lt;/waterFall&gt;
&lt;/template&gt;

&lt;script setup lang=&#39;ts&#39;&gt;
import waterFall from &quot;./components/water-fall.vue&quot;;
const getName = (name: string) =&gt; {
  console.log(name, &#39;========&gt;我是父组件&#39;);
}
&lt;/script&gt;


&lt;style scoped&gt;

&lt;/style&gt;
</code></pre></div>
<h5 id="_17">子组件变量暴露给父组件<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h5>
<p>父组件：</p>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
&lt;waterFallVue ref=&quot;waterFall&quot;&gt; &lt;/waterFallVue&gt;
&lt;/template&gt;

&lt;script setup lang=&#39;ts&#39;&gt;
import { ref } from &quot;vue&quot;;
import waterFallVue from &quot;./components/water-fall.vue&quot;;
const waterFall = ref&lt;InstanceType&lt;typeof waterFallVue&gt;&gt;() // 获取dom
console.log(waterFall.value?.list);
&lt;/script&gt;


&lt;style scoped&gt;

&lt;/style&gt;
</code></pre></div>
<p>子组件：</p>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
&lt;div&gt;子集&lt;/div&gt;
&lt;/template&gt;


&lt;script setup lang=&quot;ts&quot;&gt;
import { reactive } from &#39;vue&#39;;

const list = reactive&lt;number[]&gt;([4, 5, 6])
defineExpose({
    list
})
&lt;/script&gt;


&lt;style scoped lang=&quot;scss&quot;&gt;

&lt;/style&gt;
</code></pre></div>
<h4 id="_18">全局组件，局部组件，递归组件<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h4>
<p><a href="https://xiaoman.blog.csdn.net/article/details/122862736">小满</a></p>
<h5 id="_19">注册全局组件：<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><span class="c1">// ./src/main.ts</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">createApp</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="s1">&#39;./style.css&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">App</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./App.vue&#39;</span>

<span class="k">import</span><span class="w"> </span><span class="nx">waterFull</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;./components/water-fall.vue&quot;</span><span class="p">;</span>
<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createApp</span><span class="p">(</span><span class="nx">App</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;water-full&#39;</span><span class="p">,</span><span class="nx">waterFull</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">);</span>
</code></pre></div>
<p>小兔鲜：</p>
<p><code>components/index.js</code></p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">ImageView</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./ImageView/index.vue&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">Sku</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./XtxSku/index.vue&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">componentPlugin</span><span class="o">=</span><span class="p">{</span>
<span class="w">    </span><span class="nx">install</span><span class="p">(</span><span class="nx">app</span><span class="p">){</span>
<span class="w">        </span><span class="nx">app</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;XtxImageView&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">ImageView</span><span class="p">)</span>
<span class="w">        </span><span class="nx">app</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;XtxSku&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">Sku</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><code>main.js</code></p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">componentPlugin</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@/components/index&quot;</span><span class="p">;</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">componentPlugin</span><span class="p">)</span>
</code></pre></div>
<p>注册完毕后，可以在其他地方使用，无需引入</p>
<h5 id="_20">递归组件<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
    &lt;div class=&quot;tree&quot; v-for=&quot;item in data&quot;&gt;
        &lt;input type=&quot;checkbox&quot;&gt; &lt;span&gt;{{ item.name }}&lt;/span&gt;
        &lt;Tree v-if=&quot;item?.children?.length&quot; :data=&quot;item.children&quot;&gt;&lt;/Tree&gt;
    &lt;/div&gt;
&lt;/template&gt;
</code></pre></div>
<p><code>Tree</code>可以是当前文件名</p>
<h4 id="_21">动态组件<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
    &lt;div style=&quot;display: flex;&quot;&gt;
        &lt;div @click=&quot;switchCom(item, index)&quot; :class=&quot;{&#39;active&#39;: active==index}&quot; class=&quot;tabs&quot; v-for=&quot;(item, index) in data&quot;&gt;
            &lt;div&gt;{{ item.name }}&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&#39;ts&#39;&gt;
import { ref, reactive } from &#39;vue&#39;;
import AVue from &#39;./components/HelloWorld.vue&#39;;
import BVue from &#39;./components/HelloWorld.vue&#39;;
import CVue from &#39;./components/HelloWorld.vue&#39;;

const comId = ref(AVue);
const active = ref(0);
const data = reactive([
    {
        name: &#39;A组件&#39;,
        com:AVue
    },
    {
        name: &#39;B组件&#39;,
        com:BVue
    },
    {
        name: &#39;C组件&#39;,
        com:CVue
    },
]);
const switchCom = (item, index) =&gt; {
    comId.value = item.com;
    active.value = index;
}
&lt;/script&gt;


&lt;style scoped&gt;

&lt;/style&gt;
</code></pre></div>
<p>性能优化</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">tab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">reactive</span><span class="o">&lt;</span><span class="nx">Com</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">([{</span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;A组件&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">comName</span><span class="o">:</span><span class="w"> </span><span class="kt">markRaw</span><span class="p">(</span><span class="nx">A</span><span class="p">)</span>
<span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;B组件&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">comName</span><span class="o">:</span><span class="w"> </span><span class="kt">markRaw</span><span class="p">(</span><span class="nx">B</span><span class="p">)</span>
<span class="p">}])</span>
</code></pre></div>
<h4 id="slot">插槽slot<a class="headerlink" href="#slot" title="Permanent link">&para;</a></h4>
<h5 id="_22">匿名插槽<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h5>
<p>在子组件放置一个插槽</p>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
    &lt;div&gt;
       &lt;slot&gt;&lt;/slot&gt;
    &lt;/div&gt;
&lt;/template&gt;
</code></pre></div>
<p>父组件使用插槽</p>
<p>在父组件给这个插槽填充内容</p>
<div class="highlight"><pre><span></span><code>&lt;Dialog&gt;
    &lt;template v-slot&gt;
        &lt;div&gt;2132&lt;/div&gt;
    &lt;/template&gt;
&lt;/Dialog&gt;
</code></pre></div>
<h5 id="_23">具名插槽<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h5>
<p>具名插槽其实就是给插槽取个名字。一个子组件可以放多个插槽，而且可以放在不同的地方，而父组件填充内容时，可以根据这个名字把内容填充到对应插槽中</p>
<ul>
<li>匿名插槽的名字是<code>default</code></li>
</ul>
<div class="highlight"><pre><span></span><code>&lt;div&gt;
    &lt;slot name=&quot;header&quot;&gt;&lt;/slot&gt;
    &lt;slot&gt;&lt;/slot&gt;

    &lt;slot name=&quot;footer&quot;&gt;&lt;/slot&gt;
&lt;/div&gt;
</code></pre></div>
<p>父组件使用需对应名称</p>
<div class="highlight"><pre><span></span><code>&lt;Dialog&gt;
    &lt;template v-slot:header&gt;
        &lt;div&gt;1&lt;/div&gt;
    &lt;/template&gt;

    &lt;template v-slot&gt;
        &lt;div&gt;2&lt;/div&gt;
    &lt;/template&gt;

    &lt;template v-slot:footer&gt;
        &lt;div&gt;3&lt;/div&gt;
    &lt;/template&gt;
&lt;/Dialog&gt;
</code></pre></div>
<h5 id="_24">作用域插槽<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h5>
<ul>
<li>普通插槽只能使用父组件的数据</li>
<li>我们让子组件在渲染时将一部分数据提供给插槽，作用域插槽可以使用子组件的数据</li>
</ul>
<p>在子组件动态绑定参数 派发给父组件的slot去使用</p>
<div class="highlight"><pre><span></span><code>&lt;div&gt;
    &lt;slot name=&quot;header&quot;&gt;&lt;/slot&gt;
    &lt;div&gt;
        &lt;div v-for=&quot;item in 100&quot;&gt;
            &lt;slot :data=&quot;item&quot;&gt;&lt;/slot&gt; // &quot;:data&quot;是传给父组件的参数
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;slot name=&quot;footer&quot;&gt;&lt;/slot&gt;
&lt;/div&gt;
</code></pre></div>
<p>通过解构方式取值</p>
<p>(v-slot有对应的简写: #)</p>
<div class="highlight"><pre><span></span><code>&lt;Dialog&gt;
    &lt;template #header&gt;
        &lt;div&gt;1&lt;/div&gt;
    &lt;/template&gt;
    &lt;template #default=&quot;{ data }&quot;&gt;
        &lt;div&gt;{{ data }}&lt;/div&gt;
    &lt;/template&gt;
    &lt;template #footer&gt;
        &lt;div&gt;3&lt;/div&gt;
    &lt;/template&gt;
&lt;/Dialog&gt;
</code></pre></div>
<p><em>简写：</em></p>
<div class="highlight"><pre><span></span><code>&lt;Dialog&gt;
    &lt;template #header&gt;
        &lt;div&gt;1&lt;/div&gt;
    &lt;/template&gt;
    &lt;template #default&gt;
        &lt;div&gt;2&lt;/div&gt;
    &lt;/template&gt;
    &lt;template #footer&gt;
        &lt;div&gt;3&lt;/div&gt;
    &lt;/template&gt;
&lt;/Dialog&gt;
</code></pre></div>
<h5 id="_25">动态插槽<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h5>
<p>插槽可以是一个变量名</p>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
    &lt;Dialog&gt;
        &lt;template #[name]&gt;
            &lt;div&gt;23&lt;/div&gt;
        &lt;/template&gt;
    &lt;/Dialog&gt;
&lt;/template&gt;

&lt;script&gt;
const name = ref(&#39;header&#39;)
&lt;/script&gt;
</code></pre></div>
<h4 id="_26">内置组件<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h4>
<h5 id="teleport">Teleport传送组件<a class="headerlink" href="#teleport" title="Permanent link">&para;</a></h5>
<p>[小满(<a href="https://xiaoman.blog.csdn.net/article/details/122916261">https://xiaoman.blog.csdn.net/article/details/122916261</a>)</p>
<p>Teleport 是一种能够将我们的模板渲染至指定DOM节点，不受父级style、v-show等属性影响，但data、prop数据依旧能够共用的技术；类似于 React 的 Portal。</p>
<p>主要解决的问题 因为Teleport节点挂载在其他指定的DOM节点下，完全不受父级style样式影响使用方法</p>
<p>通过to 属性 插入指定元素位置 to="body" 便可以将<code>Teleport</code> 内容传送到指定位置</p>
<p>也可以自定义传送位置 支持 class id等 选择器</p>
<h5 id="keep-alive">keep-alive缓存组件<a class="headerlink" href="#keep-alive" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code> &lt;keep-alive :include=&quot;[&#39;A&#39;, &#39;B&#39;]&quot; :exclude=&quot;[&#39;C&#39;, &#39;D&#39;]&quot; :max=&quot;&quot;&gt;&lt;/keep-alive&gt;
</code></pre></div>
<ul>
<li><code>include</code>：要缓存的组件</li>
<li><code>exclude</code>：不缓存的组件</li>
<li><code>max</code>：缓存组件的最大数量，<code>LRU</code>算法</li>
</ul>
<p>生命周期</p>
<div class="highlight"><pre><span></span><code><span class="nx">onMounted</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;初始化&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">//只做一次</span>
<span class="p">})</span>
<span class="nx">onActivated</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;keep-alive初始化&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">//每次切换时和第一次注册时都做</span>
<span class="p">})</span>
<span class="nx">onDeactivated</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;keep-alive卸载&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">//每次切换时都做</span>
<span class="p">})</span>
<span class="nx">onUnmounted</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;卸载&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">//不做</span>
<span class="p">})</span>
</code></pre></div>
<h5 id="transition">transition 过渡组件<a class="headerlink" href="#transition" title="Permanent link">&para;</a></h5>
<p>Vue 提供了 transition 的封装组件，在下列情形中，可以给任何元素和组件添加进入/离开过渡:</p>
<ul>
<li>条件渲染 (使用 v-if)</li>
<li>条件展示 (使用 v-show)</li>
<li>动态组件</li>
<li>组件根节点</li>
</ul>
<p>自定义 transition 过度效果，你需要对transition组件的name属性自定义。并在css中写入对应的样式</p>
<p>在进入/离开的过渡中，会有 6 个 class 切换，下面的<code>v</code>代表<code>template</code>中<code>name</code>的值</p>
<ol>
<li>v-enter-from：定义进入过渡的开始状态。在元素被插入之前生效，在元素被插入之后的下一帧移除。</li>
<li>v-enter-active：定义进入过渡生效时的状态。在整个进入过渡的阶段中应用，在元素被插入之前生效，在过渡/动画完成之后移除。这个类可以被用来定义进入过渡的过程时间，延迟和曲线函数。</li>
<li>v-enter-to：定义进入过渡的结束状态。在元素被插入之后下一帧生效 (与此同时 v-enter-from 被移除)，在过渡/动画完成之后移除。</li>
<li>v-leave-from：定义离开过渡的开始状态。在离开过渡被触发时立刻生效，下一帧被移除。</li>
<li>v-leave-active：定义离开过渡生效时的状态。在整个离开过渡的阶段中应用，在离开过渡被触发时立刻生效，在过渡/动画完成之后移除。这个类可以被用来定义离开过渡的过程时间，延迟和曲线函数。</li>
<li>v-leave-to：离开过渡的结束状态。在离开过渡被触发之后下一帧生效 (与此同时 v-leave-from 被移除)，在过渡/动画完成之后移除。</li>
</ol>
<p>示例：</p>
<div class="highlight"><pre><span></span><code><span class="o">//</span><span class="nt">开始过度</span>
<span class="p">.</span><span class="nc">fade-enter-from</span><span class="p">{</span>
<span class="w">   </span><span class="k">background</span><span class="p">:</span><span class="kc">red</span><span class="p">;</span>
<span class="w">   </span><span class="k">width</span><span class="p">:</span><span class="mi">0</span><span class="kt">px</span><span class="p">;</span>
<span class="w">   </span><span class="k">height</span><span class="p">:</span><span class="mi">0</span><span class="kt">px</span><span class="p">;</span>
<span class="w">   </span><span class="k">transform</span><span class="p">:</span><span class="nb">rotate</span><span class="p">(</span><span class="mi">360</span><span class="kt">deg</span><span class="p">)</span>
<span class="p">}</span>
<span class="o">//</span><span class="nt">开始过度了</span>
<span class="p">.</span><span class="nc">fade-enter-active</span><span class="p">{</span>
<span class="w">  </span><span class="k">transition</span><span class="p">:</span><span class="w"> </span><span class="kc">all</span><span class="w"> </span><span class="mf">2.5</span><span class="kt">s</span><span class="w"> </span><span class="kc">linear</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">//</span><span class="nt">过度完成</span>
<span class="p">.</span><span class="nc">fade-enter-to</span><span class="p">{</span>
<span class="w">   </span><span class="k">background</span><span class="p">:</span><span class="kc">yellow</span><span class="p">;</span>
<span class="w">   </span><span class="k">width</span><span class="p">:</span><span class="mi">200</span><span class="kt">px</span><span class="p">;</span>
<span class="w">   </span><span class="k">height</span><span class="p">:</span><span class="mi">200</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">//</span><span class="nt">离开的过度</span>
<span class="p">.</span><span class="nc">fade-leave-from</span><span class="p">{</span>
<span class="w">  </span><span class="k">width</span><span class="p">:</span><span class="mi">200</span><span class="kt">px</span><span class="p">;</span>
<span class="w">  </span><span class="k">height</span><span class="p">:</span><span class="mi">200</span><span class="kt">px</span><span class="p">;</span>
<span class="w">  </span><span class="k">transform</span><span class="p">:</span><span class="nb">rotate</span><span class="p">(</span><span class="mi">360</span><span class="kt">deg</span><span class="p">)</span>
<span class="p">}</span>
<span class="o">//</span><span class="nt">离开中过度</span>
<span class="p">.</span><span class="nc">fade-leave-active</span><span class="p">{</span>
<span class="w">  </span><span class="k">transition</span><span class="p">:</span><span class="w"> </span><span class="kc">all</span><span class="w"> </span><span class="mi">1</span><span class="kt">s</span><span class="w"> </span><span class="kc">linear</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">//</span><span class="nt">离开完成</span>
<span class="p">.</span><span class="nc">fade-leave-to</span><span class="p">{</span>
<span class="w">  </span><span class="k">width</span><span class="p">:</span><span class="mi">0</span><span class="kt">px</span><span class="p">;</span>
<span class="w">   </span><span class="k">height</span><span class="p">:</span><span class="mi">0</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="provide-inject">依赖注入Provide / Inject<a class="headerlink" href="#provide-inject" title="Permanent link">&para;</a></h4>
<ul>
<li>注册一个变量，可以全局使用</li>
<li>顶层组件向任意的底层组件传递数据和方法，实现跨层组件通信</li>
<li>顶层组件：<code>provide('key',value)</code></li>
<li>底层组件：<code>const message=inject('key')</code></li>
</ul>
<p><img src="./小满VUE/image-20230911151041239.png" alt="image-20230911151041239" style="zoom:50%;" /></p>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
&lt;h1&gt;app.vue&lt;/h1&gt;
&lt;label&gt;
    &lt;input v-model=&quot;colorVal&quot; value=&#39;red&#39; name=&quot;color&quot; type=&quot;radio&quot;&gt; 红色
&lt;/label&gt;
&lt;label&gt;
    &lt;input v-model=&quot;colorVal&quot; value=&#39;pink&#39; name=&quot;color&quot; type=&quot;radio&quot;&gt; 粉色
&lt;/label&gt;
&lt;label&gt;
    &lt;input v-model=&quot;colorVal&quot; value=&#39;green&#39; name=&quot;color&quot; type=&quot;radio&quot;&gt; 绿色
&lt;/label&gt;
&lt;div class=&quot;box&quot;&gt;&lt;/div&gt;
&lt;hr&gt;
&lt;vueA&gt;&lt;/vueA&gt;
&lt;/template&gt;

&lt;script setup lang=&#39;ts&#39;&gt;
import { provide, ref } from &#39;vue&#39;;
import vueA from &#39;./components/providea.vue&#39;

const colorVal=ref&lt;string&gt;(&#39;red&#39;)
provide(&#39;color&#39;, colorVal)

&lt;/script&gt;

&lt;style scoped&gt;
.box{
    width: 100px;
    height: 100px;
    background-color: v-bind(colorVal);
}
&lt;/style&gt;
</code></pre></div>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
&lt;div&gt;&lt;/div&gt;
&lt;hr&gt;
&lt;vueB&gt;&lt;/vueB&gt;
&lt;/template&gt;

&lt;script setup lang=&#39;ts&#39;&gt;
import type{Ref} from &#39;vue&#39;
import { inject} from &#39;vue&#39;
import vueB from &#39;./provideb.vue&#39;
const color = inject&lt;Ref&lt;string&gt;&gt;(&#39;color&#39;)
&lt;/script&gt;

&lt;style scoped&gt;
div{
    width: 100px;
    height: 100px;
    background-color: v-bind(color);
}
&lt;/style&gt;
</code></pre></div>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
&lt;div&gt;&lt;/div&gt;
&lt;button @click=&quot;change(111)&quot;&gt;绿！&lt;/button&gt;
&lt;/template&gt;

&lt;script setup lang=&#39;ts&#39;&gt;
import { inject } from &quot;vue&quot;;
import type { Ref } from &#39;vue&#39;;
const color=inject&lt;Ref&lt;string&gt;&gt;(&#39;color&#39;)
const change = (num: number)=&gt;{
    console.log(num);
    color!.value=&#39;green&#39;
}
&lt;/script&gt;

&lt;style scoped&gt;
div{
    width: 100px;
    height: 100px;
    background-color: v-bind(color);
}
&lt;/style&gt;
</code></pre></div>
<h4 id="bus">兄弟组件传参和bus<a class="headerlink" href="#bus" title="Permanent link">&para;</a></h4>
<h5 id="_27">借助父组件<a class="headerlink" href="#_27" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
    &lt;div&gt;
        &lt;A @on-click=&quot;getFalg&quot;&gt;&lt;/A&gt;
        &lt;B :flag=&quot;Flag&quot;&gt;&lt;/B&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&#39;ts&#39;&gt;
import A from &#39;./components/A.vue&#39;
import B from &#39;./components/B.vue&#39;
import { ref } from &#39;vue&#39;
let Flag = ref&lt;boolean&gt;(false)
const getFalg = (flag: boolean) =&gt; {
   Flag.value = flag;
}
&lt;/script&gt;

&lt;style&gt;
&lt;/style&gt;
</code></pre></div>
<p>A 组件派发事件通过App.vue 接受A组件派发的事件然后在Props 传给B组件 也是可以实现的</p>
<p>缺点就是比较麻烦 ，无法直接通信，只能充当桥梁</p>
<h5 id="event-bus">Event Bus<a class="headerlink" href="#event-bus" title="Permanent link">&para;</a></h5>
<p>我们在Vue2可以使用 $emit 传递 $on监听 emit传递过来的事件</p>
<p>这个原理其实是运用了JS设计模式之发布订阅模式</p>
<p>我写了一个简易版</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="kr">type</span><span class="w"> </span><span class="nx">BusClass</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">emit</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">void</span>
<span class="w">    </span><span class="nx">on</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="o">:</span><span class="w"> </span><span class="kt">Function</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">void</span>
<span class="p">}</span>
<span class="kr">type</span><span class="w"> </span><span class="nx">BusParams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">symbol</span><span class="w"> </span>
<span class="kr">type</span><span class="w"> </span><span class="nx">List</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="kt">BusParams</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="nb">Array</span><span class="o">&lt;</span><span class="nb">Function</span><span class="o">&gt;</span>
<span class="p">}</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">Bus</span><span class="o">&lt;</span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">BusParams</span><span class="o">&gt;</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">BusClass</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">list</span><span class="o">:</span><span class="w"> </span><span class="kt">List</span>
<span class="w">    </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nx">emit</span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">,</span><span class="w"> </span><span class="nx">...args</span><span class="o">:</span><span class="w"> </span><span class="kt">Array</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">eventName</span><span class="o">:</span><span class="w"> </span><span class="kt">Array</span><span class="o">&lt;</span><span class="nb">Function</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">list</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span>
<span class="w">        </span><span class="nx">eventName</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">ev</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">ev</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="nx">args</span><span class="p">)</span>
<span class="w">        </span><span class="p">})</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nx">on</span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="o">:</span><span class="w"> </span><span class="kt">Function</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">fn</span><span class="o">:</span><span class="w"> </span><span class="kt">Array</span><span class="o">&lt;</span><span class="nb">Function</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">list</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">[];</span>
<span class="w">        </span><span class="nx">fn</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">list</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fn</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Bus</span><span class="o">&lt;</span><span class="kt">number</span><span class="o">&gt;</span><span class="p">()</span>
</code></pre></div>
<h5 id="mitt">mitt库<a class="headerlink" href="#mitt" title="Permanent link">&para;</a></h5>
<p><a href="https://xiaoman.blog.csdn.net/article/details/125453908">https://xiaoman.blog.csdn.net/article/details/125453908</a></p>
<ol>
<li>安装</li>
</ol>
<div class="highlight"><pre><span></span><code>npm<span class="w"> </span>install<span class="w"> </span>mitt<span class="w"> </span>-S
</code></pre></div>
<ol>
<li>main.ts 初始化
   全局总线，vue 入口文件 main.js 中挂载全局属性</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">createApp</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">App</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./App.vue&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">mitt</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;mitt&#39;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">Mit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">mitt</span><span class="p">()</span>

<span class="c1">//TypeScript注册</span>
<span class="c1">// 由于必须要拓展ComponentCustomProperties类型才能获得类型提示</span>
<span class="kr">declare</span><span class="w"> </span><span class="nx">module</span><span class="w"> </span><span class="s2">&quot;vue&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">ComponentCustomProperties</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$Bus</span><span class="o">:</span><span class="w"> </span><span class="kt">typeof</span><span class="w"> </span><span class="nx">Mit</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createApp</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span>

<span class="c1">//Vue3挂载全局API</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">globalProperties</span><span class="p">.</span><span class="nx">$Bus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Mit</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span>
</code></pre></div>
<h4 id="tsx">TSX<a class="headerlink" href="#tsx" title="Permanent link">&para;</a></h4>
<p><a href="https://xiaoman.blog.csdn.net/article/details/123172735">https://xiaoman.blog.csdn.net/article/details/123172735</a></p>
<p>JSX本身是一种JavaScript的语法扩展，用于在JavaScript代码中编写类似于HTML的结构。它通常与React一起使用，用于构建用户界面。</p>
<p>TSX是指"TypeScript JSX"，是一种使用TypeScript编写的JavaScript的扩展语法。</p>
<p><code>vite.config.ts</code>配置：</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">defineConfig</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vite&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">vue</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@vitejs/plugin-vue&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">vueJsx</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@vitejs/plugin-vue-jsx&#39;</span>
<span class="c1">// https://vitejs.dev/config/</span>
<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="nx">defineConfig</span><span class="p">({</span>
<span class="w">    </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">vue</span><span class="p">(),</span><span class="w"> </span><span class="nx">vueJsx</span><span class="p">()],</span>
<span class="w">    </span><span class="nx">css</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">preprocessorOptions</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">scss</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">additionalData</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;@import &#39;./src/bem.scss&#39;;&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">})</span>
</code></pre></div>
<p><code>App.vue:</code></p>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
&lt;div&gt;
    &lt;xiaoman&gt;&lt;/xiaoman&gt;
&lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&#39;ts&#39;&gt;
import xiaoman from &#39;./App.tsx&#39;
&lt;/script&gt;

&lt;style scoped&gt;

&lt;/style&gt;
</code></pre></div>
<p><code>App.tsx</code>第一种写法：</p>
<div class="highlight"><pre><span></span><code>// App.tsx
export default function () {
    return (&lt;div&gt;小满&lt;/div&gt;)
}
</code></pre></div>
<p>另一种：</p>
<div class="highlight"><pre><span></span><code>// 返回一个渲染函数
import { defineComponent } from &quot;vue&quot;
export default defineComponent({
    data() {
        return {
            age: 23
        } 
    },
    render() { 
        return (&lt;div&gt;{ this.age }&lt;/div&gt;)
    }
})
</code></pre></div>
<p>第三种：</p>
<div class="highlight"><pre><span></span><code>// 返回一个渲染函数
// optionsAPI

import { defineComponent } from &quot;vue&quot;
export default defineComponent({
    setup() {
        return () =&gt; &lt;div&gt;hello&lt;/div&gt;
    },
})
</code></pre></div>
<p>TIPS tsx不会自动解包，使用ref也要加.vlaue ! ! !</p>
<ul>
<li>
<p>tsx支持 <code>v-model</code> 和 <code>v-show</code>的使用</p>
</li>
<li>
<p><code>v-if</code>不支持</p>
</li>
<li>
<p><code>v-for</code>不支持（可以用.map() 模拟）</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code>import { ref } from &#39;vue&#39;

let arr = [1,2,3,4,5]

const renderDom = () =&gt; {
    return (
        &lt;&gt;
            {
              arr.map(v=&gt;{
                  return &lt;div&gt;${v}&lt;/div&gt;
              })
            }
        &lt;/&gt;
    )
}

export default renderDom
</code></pre></div>
<ul>
<li><code>v-bind</code>使用：</li>
</ul>
<p>直接赋值即可</p>
<div class="highlight"><pre><span></span><code>import { ref } from &#39;vue&#39;

let arr = [1, 2, 3, 4, 5]

const renderDom = () =&gt; {
    return (
        &lt;&gt;
            &lt;div data-arr={arr}&gt;1&lt;/div&gt;
        &lt;/&gt;
    )
}

export default renderDom
</code></pre></div>
<ul>
<li>
<p>v-on绑定事件 所有的事件都按照react风格来</p>
</li>
<li>
<p>所有事件有on开头</p>
</li>
<li>所有事件名称首字母大写</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c">const </span><span class="nv">renderDom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="err">{</span>
<span class="c">    re</span><span class="nv">turn</span><span class="w"> </span><span class="p">(</span>
<span class="c">      </span><span class="w">  </span><span class="o">&lt;&gt;</span>
<span class="c">      </span><span class="w">      </span><span class="o">&lt;</span><span class="nv">button</span><span class="w"> </span><span class="nv">onClick</span><span class="o">=</span><span class="err">{</span><span class="nv">clickTap</span><span class="err">}</span><span class="o">&gt;</span><span class="err">点击</span><span class="o">&lt;/</span><span class="nv">button</span><span class="o">&gt;</span>
<span class="c">      </span><span class="w">  </span><span class="o">&lt;/&gt;</span>
<span class="w">    </span><span class="p">)</span>
<span class="err">}</span>

<span class="c">const </span><span class="nv">clickTap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="err">{</span>
<span class="c">    co</span><span class="nv">nsole</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">);</span>
<span class="err">}</span>

<span class="c">export</span><span class="w"> </span><span class="kp">default</span><span class="w"> </span><span class="nv">renderDom</span>
</code></pre></div>
<h4 id="directive">directive自定义指令<a class="headerlink" href="#directive" title="Permanent link">&para;</a></h4>
<h5 id="js">js图片懒加载<a class="headerlink" href="#js" title="Permanent link">&para;</a></h5>
<p><code>main.js</code></p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">createApp</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">createPinia</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;pinia&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">App</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./App.vue&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">router</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./router&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="s1">&#39;@/styles/common.scss&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useIntersectionObserver</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@vueuse/core&#39;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createApp</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">createPinia</span><span class="p">())</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">router</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">&#39;img-lazy&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">mounted</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span><span class="w"> </span><span class="nx">binding</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// console.log(el, binding.value);</span>
<span class="w">        </span><span class="nx">useIntersectionObserver</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span><span class="w"> </span><span class="p">([{</span><span class="w"> </span><span class="nx">isIntersecting</span><span class="w"> </span><span class="p">}])</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">isIntersecting</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">el</span><span class="p">.</span><span class="nx">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">binding</span><span class="p">.</span><span class="nx">value</span>
<span class="w">                </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mf">11111</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">})</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">})</span>
</code></pre></div>
<p>需要在<code>main.js</code>中注册：</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">lazyPlugin</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/directives&#39;</span><span class="p">;</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">lazyPlugin</span><span class="p">)</span>
</code></pre></div>
<p><code>App.vue</code></p>
<div class="highlight"><pre><span></span><code>&lt;img v-img-lazy=&quot;item.picture&quot; alt=&quot;&quot; /&gt;
// binding.value=item.picture
</code></pre></div>
<ul>
<li><code>v-img-lazy</code>就是自定义的指令</li>
<li>这个指令有生命周期钩子</li>
<li>生命周期钩子接收两个参数</li>
<li><code>el</code>是dom对象</li>
<li><code>bing.value</code>是等于号后面绑定的表达式的值图片url</li>
</ul>
<p>插件化：</p>
<p><code>directive/index.js</code></p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useIntersectionObserver</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@vueuse/core&#39;</span>
<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">lazyPlugin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">install</span><span class="p">(</span><span class="nx">app</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">app</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">&#39;img-lazy&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">mounted</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span><span class="w"> </span><span class="nx">binding</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="c1">// console.log(el, binding.value);</span>
<span class="w">                </span><span class="nx">useIntersectionObserver</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span><span class="w"> </span><span class="p">([{</span><span class="w"> </span><span class="nx">isIntersecting</span><span class="w"> </span><span class="p">}])</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">isIntersecting</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nx">el</span><span class="p">.</span><span class="nx">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">binding</span><span class="p">.</span><span class="nx">value</span>
<span class="w">                        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mf">11111</span><span class="p">);</span>
<span class="w">                        </span><span class="nx">stop</span><span class="p">()</span><span class="w"> </span><span class="c1">// 由于useIntersectionObserver的特性，加上这个才会只请求一次</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">})</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">})</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><code>main.js</code></p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">createApp</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">createPinia</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;pinia&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">App</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./App.vue&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">router</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./router&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="s1">&#39;@/styles/common.scss&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">lazyPlugin</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/directives&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createApp</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">createPinia</span><span class="p">())</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">router</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">lazyPlugin</span><span class="p">)</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span>
</code></pre></div>
<p>ts:</p>
<h5 id="_28">样例简介<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
&lt;div&gt;
    &lt;button&gt;切换&lt;/button&gt;
    &lt;A v-move:aaa.xiaoman=&quot;{background: &#39;red&#39;}&quot;&gt;&lt;/A&gt;
&lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&#39;ts&#39;&gt;
import A from &#39;./components/A.vue&#39;
import { ref, Directive, DirectiveBinding } from &#39;vue&#39;
let flag = ref&lt;boolean&gt;(true)
const vMove: Directive = {
    created() {
        console.log(&#39;========&gt; created&#39;);
        console.log(arguments);
    },
    beforeMount() {
        console.log(&#39;========&gt; created&#39;);
        console.log(arguments);
    },
    mounted() {
        console.log(&#39;========&gt; created&#39;);
        console.log(arguments);
    },
    beforeUpdate() {
        console.log(&#39;========&gt; created&#39;);
        console.log(arguments);
    },
    updated() {
        console.log(&#39;========&gt; created&#39;);
        console.log(arguments);
    },
    beforeUnmount() {
        console.log(&#39;========&gt; created&#39;);
        console.log(arguments);
    },
    unmounted() {
        console.log(&#39;========&gt; created&#39;);
        console.log(arguments);
    },
} 
&lt;/script&gt;

&lt;style scoped&gt;

&lt;/style&gt;
</code></pre></div>
<p><code>A.vue</code></p>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
&lt;div class=&quot;AAA&quot;&gt;&lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&#39;ts&#39;&gt;

&lt;/script&gt;

&lt;style scoped&gt;
div{
    width: 100px;
    height: 100px;
    background-color: #888;
}
&lt;/style&gt;
</code></pre></div>
<p>输出：</p>
<p><img alt="image-20230912201155664" src="image-20230912201155664.png" /></p>
<ol>
<li>
<p><code>div.AAA</code>是子组件的选择器<code>el</code>，类型：<code>HTMLElement</code></p>
</li>
<li>
<p><img alt="image-20230912201356552" src="image-20230912201356552.png" /></p>
</li>
</ol>
<p>类型：<code>DirectiveBinding</code>，传过来的参数:</p>
<ul>
<li>instance：使用指令的组件实例。</li>
<li>value：传递给指令的值。例如，在 v-my-directive="1 + 1" 中，该值为 2。</li>
<li>oldValue：先前的值，仅在 beforeUpdate 和 updated 中可用。无论值是否有更改都可用。</li>
<li>arg：传递给指令的参数(如果有的话)。例如在 v-my-directive:foo 中，arg 为 "foo"。</li>
<li>modifiers：包含修饰符(如果有的话) 的对象。例如在 v-my-directive.foo.bar 中，修饰符对象为 {foo: true，bar: true}。</li>
<li>
<p>dir：一个对象，在注册指令时作为参数传递。例如，在以下指令中</p>
</li>
<li>
<p>当前组件的<code>v-node</code>，虚拟dom</p>
</li>
<li>
<p><code>prevode</code>，上一个虚拟dom</p>
</li>
</ul>
<h5 id="_29">函数简写<a class="headerlink" href="#_29" title="Permanent link">&para;</a></h5>
<p>可能想在 <code>mounted</code> 和 <code>updated</code> 时触发相同行为，而不关心其他的钩子函数。那么你可以通过将这个函数模式实现</p>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
   &lt;div class=&quot;btns&quot;&gt;
       &lt;button v-has-show=&quot;&#39;shop:create&#39;&quot;&gt;创建&lt;/button&gt;

       &lt;button v-has-show=&quot;&#39;shop:edit&#39;&quot;&gt;编辑&lt;/button&gt;

       &lt;button v-has-show=&quot;&#39;shop:delete&#39;&quot;&gt;删除&lt;/button&gt;
   &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&#39;ts&#39;&gt;
import { ref, reactive,  } from &#39;vue&#39;
import type {Directive} from &#39;vue&#39;
//permission
localStorage.setItem(&#39;userId&#39;,&#39;xiaoman-zs&#39;)

//mock后台返回的数据
const permission = [
    &#39;xiaoman-zs:shop:edit&#39;,
    &#39;xiaoman-zs:shop:create&#39;,
    &#39;xiaoman-zs:shop:delete&#39;
]
const userId = localStorage.getItem(&#39;userId&#39;) as string
const vHasShow:Directive&lt;HTMLElement,string&gt; = (el,bingding) =&gt; {
   if(!permission.includes(userId+&#39;:&#39;+ bingding.value)){
       el.style.display = &#39;none&#39;
   }
}

&lt;/script&gt;

&lt;style scoped lang=&#39;less&#39;&gt;
.btns{
    button{
        margin: 10px;
    }
}
&lt;/style&gt;
</code></pre></div>
<h5 id="_30">图片懒加载<a class="headerlink" href="#_30" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
    &lt;div&gt;
        &lt;div v-for=&quot;item in arr&quot;&gt;
            &lt;img height=&quot;500&quot; :data-index=&quot;item&quot; v-lazy=&quot;item&quot; width=&quot;360&quot; alt=&quot;&quot;&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&#39;ts&#39;&gt;
import { ref, reactive } from &#39;vue&#39;
import type { Directive } from &#39;vue&#39;
const images: Record&lt;string, { default: string }&gt; = import.meta.globEager(&#39;./assets/images/*.*&#39;)
let arr = Object.values(images).map(v =&gt; v.default)

let vLazy: Directive&lt;HTMLImageElement, string&gt; = async (el, binding) =&gt; {
    let url = await import(&#39;./assets/vue.svg&#39;)
    el.src = url.default;
    let observer = new IntersectionObserver((entries) =&gt; {
        console.log(entries[0], el)
        if (entries[0].intersectionRatio &gt; 0 &amp;&amp; entries[0].isIntersecting) {
            setTimeout(() =&gt; {
                el.src = binding.value;
                observer.unobserve(el)
            }, 2000)
        }
    })
    observer.observe(el)
}

&lt;/script&gt;

&lt;style scoped lang=&#39;less&#39;&gt;&lt;/style&gt;
</code></pre></div>
<h4 id="attrs-hooks">自定义attrs / hooks<a class="headerlink" href="#attrs-hooks" title="Permanent link">&para;</a></h4>
<p><a href="https://xiaoman.blog.csdn.net/article/details/123271189">https://xiaoman.blog.csdn.net/article/details/123271189</a></p>
<p>主要用来处理复用代码逻辑的一些封装</p>
<p>这个在vue2 就已经有一个东西是**Mixins**</p>
<p>mixins就是将这些多个相同的逻辑抽离出来，各个组件只需要引入mixins，就能实现一次写代码，多组件受益的效果。</p>
<p>弊端就是 会涉及到覆盖的问题</p>
<p>组件的data、methods、filters会覆盖mixins里的同名data、methods、filters。</p>
<h5 id="attrs">自定义attrs<a class="headerlink" href="#attrs" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
&lt;A a=&quot;111&quot; b.ccc=&quot;cscacsa&quot;&gt;&lt;/A&gt;
&lt;/template&gt;

&lt;script setup lang=&#39;ts&#39;&gt;
import A from &#39;./components/A.vue&#39;

&lt;/script&gt;

&lt;style scoped&gt;

&lt;/style&gt;
</code></pre></div>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
&lt;/template&gt;

&lt;script setup lang=&#39;ts&#39;&gt;
import {useAttrs} from &#39;vue&#39;;
let attr = useAttrs()
console.log(attr.a);

&lt;/script&gt;

&lt;style scoped&gt;

&lt;/style&gt;
</code></pre></div>
<h5 id="hooks">自定义hooks<a class="headerlink" href="#hooks" title="Permanent link">&para;</a></h5>
<p>图片转base64</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">onMounted</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>


<span class="kr">type</span><span class="w"> </span><span class="nx">Options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">el</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>

<span class="kr">type</span><span class="w"> </span><span class="nx">Return</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">Baseurl</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">null</span>
<span class="p">}</span>
<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">option</span><span class="o">:</span><span class="w"> </span><span class="kt">Options</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Return</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">onMounted</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">file</span><span class="o">:</span><span class="w"> </span><span class="kt">HTMLImageElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="nx">option</span><span class="p">.</span><span class="nx">el</span><span class="p">)</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">HTMLImageElement</span><span class="p">;</span>
<span class="w">            </span><span class="nx">file</span><span class="p">.</span><span class="nx">onload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="o">:</span><span class="ow">void</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">resolve</span><span class="p">({</span>
<span class="w">                    </span><span class="nx">Baseurl</span><span class="o">:</span><span class="w"> </span><span class="kt">toBase64</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span>
<span class="w">                </span><span class="p">})</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">})</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">toBase64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">el</span><span class="o">:</span><span class="w"> </span><span class="kt">HTMLImageElement</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">canvas</span><span class="o">:</span><span class="w"> </span><span class="kt">HTMLCanvasElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;canvas&#39;</span><span class="p">)</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">ctx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">)</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">CanvasRenderingContext2D</span>
<span class="w">            </span><span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">el</span><span class="p">.</span><span class="nx">width</span>
<span class="w">            </span><span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">el</span><span class="p">.</span><span class="nx">height</span>
<span class="w">            </span><span class="nx">ctx</span><span class="p">.</span><span class="nx">drawImage</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span>
<span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">el</span><span class="p">.</span><span class="nx">width</span><span class="p">);</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">canvas</span><span class="p">.</span><span class="nx">toDataURL</span><span class="p">(</span><span class="s1">&#39;image/png&#39;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">})</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_31">全局函数和变量<a class="headerlink" href="#_31" title="Permanent link">&para;</a></h4>
<p><code>App.vue</code></p>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
&lt;div&gt;{{ $env }}&lt;/div&gt;
&lt;div&gt;{{ $filters.format(&#39;的飞机&#39;) }}&lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&#39;ts&#39;&gt;
import { ref, reactive, getCurrentInstance } from &#39;vue&#39;;
const app = getCurrentInstance()
console.log(app?.proxy.$env);

&lt;/script&gt;

&lt;style scoped&gt;

&lt;/style&gt;
</code></pre></div>
<p><code>main.ts</code></p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">createApp</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">App</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./App.vue&#39;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createApp</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">globalProperties</span><span class="p">.</span><span class="nx">$env</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;dev&#39;</span><span class="p">;</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">globalProperties</span><span class="p">.</span><span class="nx">$filters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">format</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">str</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="sb">`小满-</span><span class="si">${</span><span class="nx">str</span><span class="si">}</span><span class="sb">`</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span>
</code></pre></div>
<h5 id="_32">消除报错版<a class="headerlink" href="#_32" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">createApp</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">App</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./App.vue&#39;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createApp</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">globalProperties</span><span class="p">.</span><span class="nx">$env</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;dev&#39;</span><span class="p">;</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">globalProperties</span><span class="p">.</span><span class="nx">$filters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">format</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">str</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="sb">`小满-</span><span class="si">${</span><span class="nx">str</span><span class="si">}</span><span class="sb">`</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kr">type</span><span class="w"> </span><span class="nx">Filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">format</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">str</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>

<span class="c1">// 声明要扩充@vue/runtime-core包的声明.</span>
<span class="c1">// 这里扩充&quot;ComponentCustomProperties&quot;接口, 因为他是vue3中实例的属性的类型.</span>
<span class="kr">declare</span><span class="w"> </span><span class="nx">module</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">ComponentCustomProperties</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$filters</span><span class="o">:</span><span class="w"> </span><span class="kt">Filter</span><span class="p">,</span>
<span class="w">        </span><span class="nx">$env</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span>
</code></pre></div>
<h4 id="_33">新的组件<a class="headerlink" href="#_33" title="Permanent link">&para;</a></h4>
<h5 id="1fragment">1.Fragment<a class="headerlink" href="#1fragment" title="Permanent link">&para;</a></h5>
<ul>
<li>在Vue2中: 组件必须有一个根标签</li>
<li>在Vue3中: 组件可以没有根标签, 内部会将多个标签包含在一个Fragment虚拟元素中</li>
<li>好处: 减少标签层级, 减小内存占用</li>
</ul>
<h5 id="2teleport">2.Teleport<a class="headerlink" href="#2teleport" title="Permanent link">&para;</a></h5>
<ul>
<li>什么是Teleport？—— <code>Teleport</code> 是一种能够将我们的<strong style="color:#DD5145">组件html结构</strong>移动到指定位置的技术。</li>
</ul>
<div class="highlight"><pre><span></span><code>&lt;teleport to=&quot;移动位置&quot;&gt;
  &lt;div v-if=&quot;isShow&quot; class=&quot;mask&quot;&gt;
      &lt;div class=&quot;dialog&quot;&gt;
          &lt;h3&gt;我是一个弹窗&lt;/h3&gt;
          &lt;button @click=&quot;isShow = false&quot;&gt;关闭弹窗&lt;/button&gt;
      &lt;/div&gt;
  &lt;/div&gt;
&lt;/teleport&gt;
</code></pre></div>
<h5 id="3suspense">3.Suspense<a class="headerlink" href="#3suspense" title="Permanent link">&para;</a></h5>
<ul>
<li>
<p>等待异步组件时渲染一些额外内容，让应用有更好的用户体验</p>
</li>
<li>
<p>使用步骤：</p>
</li>
<li>
<p>异步引入组件</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">defineAsyncComponent</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">Child</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">defineAsyncComponent</span><span class="p">(()=&gt;</span><span class="k">import</span><span class="p">(</span><span class="s1">&#39;./components/Child.vue&#39;</span><span class="p">))</span>
</code></pre></div>
</li>
<li>
<p>使用<code>Suspense</code>包裹组件，并配置好<code>default</code> 与 <code>fallback</code></p>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
    &lt;div class=&quot;app&quot;&gt;
        &lt;h3&gt;我是App组件&lt;/h3&gt;
        &lt;Suspense&gt;
            &lt;template v-slot:default&gt;
                &lt;Child/&gt;
            &lt;/template&gt;
            &lt;template v-slot:fallback&gt;
                &lt;h3&gt;加载中.....&lt;/h3&gt;
            &lt;/template&gt;
        &lt;/Suspense&gt;
    &lt;/div&gt;
&lt;/template&gt;
</code></pre></div>
</li>
</ul>
<h4 id="vue3_1">其他vue3新特性<a class="headerlink" href="#vue3_1" title="Permanent link">&para;</a></h4>
<h5 id="1api">1.全局API的转移<a class="headerlink" href="#1api" title="Permanent link">&para;</a></h5>
<ul>
<li>
<p>Vue 2.x 有许多全局 API 和配置。</p>
</li>
<li>
<p>例如：注册全局组件、注册全局指令等。</p>
<div class="highlight"><pre><span></span><code><span class="c1">//注册全局组件</span>
<span class="nx">Vue</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;MyButton&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span>
<span class="w">    </span><span class="nx">count</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span>
<span class="w">  </span><span class="p">}),</span>
<span class="w">  </span><span class="nx">template</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&lt;button @click=&quot;count++&quot;&gt;Clicked {{ count }} times.&lt;/button&gt;&#39;</span>
<span class="p">})</span>

<span class="c1">//注册全局指令</span>
<span class="nx">Vue</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">&#39;focus&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">inserted</span><span class="o">:</span><span class="w"> </span><span class="nx">el</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">el</span><span class="p">.</span><span class="nx">focus</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>Vue3.0中对这些API做出了调整：</p>
</li>
<li>
<p>将全局的API，即：<code>Vue.xxx</code>调整到应用实例（<code>app</code>）上</p>
<table>
<thead>
<tr>
<th>2.x 全局 API（<code>Vue</code>）</th>
<th>3.x 实例 API (<code>app</code>)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Vue.config.xxxx</td>
<td>app.config.xxxx</td>
</tr>
<tr>
<td>Vue.config.productionTip</td>
<td><strong style="color:#DD5145">移除</strong></td>
</tr>
<tr>
<td>Vue.component</td>
<td>app.component</td>
</tr>
<tr>
<td>Vue.directive</td>
<td>app.directive</td>
</tr>
<tr>
<td>Vue.mixin</td>
<td>app.mixin</td>
</tr>
<tr>
<td>Vue.use</td>
<td>app.use</td>
</tr>
<tr>
<td>Vue.prototype</td>
<td>app.config.globalProperties</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h5 id="2">2.其他改变<a class="headerlink" href="#2" title="Permanent link">&para;</a></h5>
<ul>
<li>
<p>data选项应始终被声明为一个函数。</p>
</li>
<li>
<p>过度类名的更改：</p>
</li>
<li>
<p>Vue2.x写法</p>
<div class="highlight"><pre><span></span><code><span class="p">.</span><span class="nc">v-enter</span><span class="o">,</span>
<span class="p">.</span><span class="nc">v-leave-to</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">opacity</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">.</span><span class="nc">v-leave</span><span class="o">,</span>
<span class="p">.</span><span class="nc">v-enter-to</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">opacity</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>Vue3.x写法</p>
<div class="highlight"><pre><span></span><code><span class="p">.</span><span class="nc">v-enter-from</span><span class="o">,</span>
<span class="p">.</span><span class="nc">v-leave-to</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">opacity</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">v-leave-from</span><span class="o">,</span>
<span class="p">.</span><span class="nc">v-enter-to</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">opacity</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</li>
<li>
<p><strong style="color:#DD5145">移除</strong>keyCode作为 v-on 的修饰符，同时也不再支持<code>config.keyCodes</code></p>
</li>
<li>
<p><strong style="color:#DD5145">移除</strong><code>v-on.native</code>修饰符</p>
</li>
<li>
<p>父组件中绑定事件</p>
<div class="highlight"><pre><span></span><code>&lt;my-component
  v-on:close=&quot;handleComponentEvent&quot;
  v-on:click=&quot;handleNativeClickEvent&quot;
/&gt;
</code></pre></div>
</li>
<li>
<p>子组件中声明自定义事件</p>
<div class="highlight"><pre><span></span><code>&lt;script&gt;
  export default {
    emits: [&#39;close&#39;]
  }
&lt;/script&gt;
</code></pre></div>
</li>
<li>
<p><strong style="color:#DD5145">移除</strong>过滤器（filter）</p>
</li>
</ul>
<blockquote>
<p>过滤器虽然这看起来很方便，但它需要一个自定义语法，打破大括号内表达式是 “只是 JavaScript” 的假设，这不仅有学习成本，而且有实现成本！建议用方法调用或计算属性去替换过滤器。</p>
</blockquote>
<ul>
<li>......</li>
</ul>
<h4 id="css">CSS特性<a class="headerlink" href="#css" title="Permanent link">&para;</a></h4>
<h5 id="_34">插槽选择器：<a class="headerlink" href="#_34" title="Permanent link">&para;</a></h5>
<p>A.vue</p>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
    &lt;div&gt;
        我是插槽
        &lt;slot&gt;&lt;/slot&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&#39;ts&#39;&gt;

&lt;/script&gt;

&lt;style scoped&gt;
:slot(.a){
    color: pink;
}
&lt;/style&gt;
</code></pre></div>
<p>App.vue</p>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
    &lt;div&gt;
        &lt;A&gt;
            &lt;div class=&quot;a&quot;&gt;私人定制div&lt;/div&gt;
        &lt;/A&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&#39;ts&#39;&gt;
import A from &quot;@/components/A.vue&quot;;

&lt;/script&gt;

&lt;style scoped&gt;&lt;/style&gt;
</code></pre></div>
<h5 id="_35">全局选择器<a class="headerlink" href="#_35" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>&lt;style&gt;
 div{
     color:red
 }
&lt;/style&gt;

&lt;style lang=&quot;less&quot; scoped&gt;

&lt;/style&gt;


&lt;style lang=&quot;less&quot; scoped&gt;
:global(div){
    color:red
}
&lt;/style&gt;
</code></pre></div>
<p>动态选择器</p>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
    &lt;div class=&quot;div&quot;&gt;
       小满是个弟弟
    &lt;/div&gt;
&lt;/template&gt;

&lt;script lang=&quot;ts&quot; setup&gt;
import { ref } from &#39;vue&#39;
const red = ref&lt;string&gt;(&#39;red&#39;)
&lt;/script&gt;

&lt;style lang=&quot;less&quot; scoped&gt;
.div{
   color:v-bind(red)
}

&lt;/style&gt;
</code></pre></div>
<p>如果是对象 v-bind 请加引号</p>
<div class="highlight"><pre><span></span><code> &lt;template&gt;
    &lt;div class=&quot;div&quot;&gt;
        小满是个弟弟
    &lt;/div&gt;
&lt;/template&gt;

&lt;script lang=&quot;ts&quot; setup&gt;
import { ref } from &quot;vue&quot;
const red = ref({
    color:&#39;pink&#39;
})
&lt;/script&gt;

    &lt;style lang=&quot;less&quot; scoped&gt;
.div {
    color: v-bind(&#39;red.color&#39;);
}
&lt;/style&gt;
</code></pre></div>
<h5 id="css-module">css module<a class="headerlink" href="#css-module" title="Permanent link">&para;</a></h5>
<p><code>&lt;style module&gt;</code> 标签会被编译为 CSS Modules 并且将生成的 CSS 类作为 $style 对象的键暴露给组件</p>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
    &lt;div :class=&quot;$style.red&quot;&gt;
        小满是个弟弟
    &lt;/div&gt;
&lt;/template&gt;

&lt;style module&gt;
.red {
    color: red;
    font-size: 20px;
}
&lt;/style&gt;
</code></pre></div>
<p>自定义注入名称（多个可以用数组）</p>
<p>你可以通过给 module attribute 一个值来自定义注入的类对象的 property 键</p>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
    &lt;div :class=&quot;[zs.red,zs.border]&quot;&gt;
        小满是个弟弟
    &lt;/div&gt;
&lt;/template&gt;

&lt;style module=&quot;zs&quot;&gt;
.red {
    color: red;
    font-size: 20px;
}
.border{
    border: 1px solid #ccc;
}
&lt;/style&gt;
</code></pre></div>
<p>与组合式 API 一同使用</p>
<p>注入的类可以通过 useCssModule API 在 setup() 和 <code>&lt;script setup&gt;</code> 中使用。对于使用了自定义注入名称的 <code>&lt;style module&gt;</code> 模块，useCssModule 接收一个对应的 module attribute 值作为第一个参数</p>
<div class="highlight"><pre><span></span><code>&lt;template&gt;
    &lt;div :class=&quot;[zs.red,zs.border]&quot;&gt;
        小满是个弟弟
    &lt;/div&gt;
&lt;/template&gt;


&lt;script setup lang=&quot;ts&quot;&gt;
import { useCssModule } from &#39;vue&#39;
const css = useCssModule(&#39;zs&#39;)
&lt;/script&gt;

&lt;style module=&quot;zs&quot;&gt;
.red {
    color: red;
    font-size: 20px;
}
.border{
    border: 1px solid #ccc;
}
&lt;/style&gt;
</code></pre></div>
<p>使用场景一般用于TSX  和 render  函数 居多</p>
<h4 id="event-loop">event loop<a class="headerlink" href="#event-loop" title="Permanent link">&para;</a></h4>
<p>同步任务</p>
<p>代码从上到下按顺序执行</p>
<p>异步任务</p>
<ol>
<li>
<p>宏任务
   script(整体代码)、setTimeout、setInterval、UI交互事件、postMessage、Ajax</p>
</li>
<li>
<p>微任务
   Promise.then catch finally、MutaionObserver、process.nextTick(Node.js 环境)</p>
</li>
</ol>
<p>运行机制</p>
<p>所有的同步任务都是在主进程执行的形成一个执行栈，主线程之外，还存在一个"任务队列"，异步任务执行队列中先执行宏任务，然后清空当次宏任务中的所有微任务，然后进行下一个tick如此形成循环。</p>
<p>nextTick 就是创建一个异步任务，那么它自然要等到同步任务执行完成后才执行。</p>
<h3 id="pinia">pinia<a class="headerlink" href="#pinia" title="Permanent link">&para;</a></h3>
<h4 id="setup-store">Setup Store<a class="headerlink" href="#setup-store" title="Permanent link">&para;</a></h4>
<p>初始化：</p>
<p><code>main.js</code></p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">createApp</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">createPinia</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;pinia&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">App</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./App.vue&#39;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">pinia</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createPinia</span><span class="p">()</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createApp</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">pinia</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span>

<span class="c1">// createApp(App).use(pinia).mount(&#39;#app&#39;)</span>
</code></pre></div>
<p><code>stroes/counter.js</code></p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">defineStore</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;pinia&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">computed</span><span class="p">,</span><span class="w"> </span><span class="nx">ref</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">axios</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;axios&#39;</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">API_URL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;http://geek.itheima.net/v1_0/channels&#39;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">useCounterStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">defineStore</span><span class="p">(</span><span class="s1">&#39;counter&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">increment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">count</span><span class="p">.</span><span class="nx">value</span><span class="o">++</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">doubleCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">computed</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">count</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">([])</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">getList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">axios</span><span class="p">(</span><span class="nx">API_URL</span><span class="p">)</span>
<span class="w">        </span><span class="nx">list</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">channels</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">count</span><span class="p">,</span><span class="w"> </span><span class="nx">increment</span><span class="p">,</span><span class="w"> </span><span class="nx">doubleCount</span><span class="p">,</span><span class="w"> </span><span class="nx">list</span><span class="p">,</span><span class="w"> </span><span class="nx">getList</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">})</span>
</code></pre></div>
<p><code>App.vue</code></p>
<div class="highlight"><pre><span></span><code>&lt;script setup&gt;
import { useCounterStore } from &#39;@/stores/counter&#39;;
import { onMounted } from &#39;vue&#39;;
import { storeToRefs } from &#39;pinia&#39;;
// console.dir(useCounterStore);

const counterStore = useCounterStore()
console.log(counterStore);

onMounted(() =&gt; {
    counterStore.getList()
})
// 数据要这样才不会丢失响应式：
const {count, doubleCount} = storeToRefs(counterStore)
&lt;/script&gt;

&lt;template&gt;
&lt;button @click=&quot;counterStore.increment&quot;&gt;{{ counterStore.count  }} || {{ counterStore.doubleCount }}&lt;/button&gt; 

&lt;ul&gt;
    &lt;li v-for=&quot;item in counterStore.list&quot; :key=&quot;item.id&quot;&gt; {{ item.name }}&lt;/li&gt;
&lt;/ul&gt;
&lt;/template&gt;

&lt;style scoped&gt;&lt;/style&gt;
</code></pre></div>
<p>数据持久化插件：<code>pinia-plugin-persistedstate</code></p>
<ul>
<li><code>ref()</code> 就是 <code>state</code> 属性</li>
<li><code>computed()</code> 就是 <code>getters</code></li>
<li><code>function()</code> 就是 <code>actions</code></li>
</ul>
<p>注意，要让 pinia 正确识别 <code>state</code>，你**必须**在 setup store 中返回 <strong><code>state</code> 的所有属性</strong>。</p>
<h4 id="option-store">Option Store<a class="headerlink" href="#option-store" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">useCounterStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">defineStore</span><span class="p">(</span><span class="s1">&#39;counter&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">count</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="p">}),</span>
<span class="w">  </span><span class="nx">getters</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kr">double</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">state</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">count</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span>
<span class="w">    </span><span class="nx">trible</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">state</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="kr">double</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="kr">double</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nx">actions</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">increment</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">count</span><span class="o">++</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">},</span>
<span class="p">})</span>
</code></pre></div>
<ul>
<li><code>state</code> 是 store 的数据 (<code>data</code>)，</li>
<li><code>getters</code> 是 store 的计算属性 (<code>computed</code>)，读取state时要加上<code>state</code>前缀，参数加上<code>state</code>，读取getters时加上<code>this</code></li>
<li><code>actions</code> 则是方法 (<code>methods</code>)。读取state时要加上<code>this</code>前缀</li>
</ul>
<p>使用 选项式API 时，你可以通过调用 store 的 <code>$reset()</code> 方法将 state 重置为初始值。</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">store</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useStore</span><span class="p">()</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">$reset</span><span class="p">()</span>
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 - present Asxjdb
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "header.autohide", "navigation.tracking", "navigation.top", "search.highlight", "search.share", "search.suggest", "content.code.annotate"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../assets/javascripts/bundle.081f42fc.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>